{{ header }}
<div id="product-product" class="container-fluid container-lg flex-grow-1 sc-product mobile-no-gutters">

    {% if oct_showcase_data.micro is defined and oct_showcase_data.micro %}
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "BreadcrumbList",
                "itemListElement":
                [
            {% for breadcrumb in breadcrumbs %}
                {% if loop.first %}
                {% else %}
                {
                    "@type": "ListItem",
                    "position": {{ loop.index -1 }},
                    "item":
                    {
                        "@id": "{{ breadcrumb.href }}",
                        "name": "{{ breadcrumb.text }}"
                    }
                }{% if not loop.last %},{% endif %}
                {% endif %}
            {% endfor %}
            ]
        }
        </script>
    {% endif %}
    <div class="content-top-box">{{ content_top }}</div>
    {% if oct_popup_purchase_status is defined and can_buy %}
        <div class="sc-product-fixed-btns position-fixed d-md-none py-2 px-3 custom-enabled">
            <div class="d-flex align-items-center justify-content-between w-100">
                <div class="fixed-price">
                    {% if not special %}
                        <div class="sc-module-price-km">
                            <div class="sc-module-price-km-prices">
                                <div class="km-price-regular">{{ price }}</div>
                            </div>
                            <div class="sc-module-price-km-usdt">
                                {{ usdt_price }} usdt
                            </div>
                        </div>
                    {% else %}
                        <div class="sc-module-price-km">
                            <div class="sc-module-price-km-prices">
                                <div class="km-price-linethrow">{{ price }}</div>
                                <div class="km-price-special">{{ special }}</div>
                            </div>
                            <div class="sc-module-price-km-usdt">
                                {{ usdt_price }} usdt
                            </div>
                        </div>
                    {% endif %}
                </div>


                <div class="sc-product-actions-top-right d-flex align-items-start gap-2">
                    <button type="button" class="product-action-btn sc-wishlist-btn " onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}" aria-label="Wishlist button">

                        <svg width="22" height="22" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M26.7867 3.14715C26.1057 2.46582 25.2971 1.92534 24.4071 1.55659C23.5172 1.18784 22.5633 0.998047 21.6 0.998047C20.6367 0.998047 19.6828 1.18784 18.7929 1.55659C17.9029 1.92534 17.0943 2.46582 16.4133 3.14715L15 4.56048L13.5867 3.14715C12.2111 1.77156 10.3454 0.99876 8.4 0.99876C6.45462 0.99876 4.58892 1.77156 3.21333 3.14715C1.83774 4.52274 1.06494 6.38844 1.06494 8.33381C1.06494 10.2792 1.83774 12.1449 3.21333 13.5205L4.62666 14.9338L15 25.3071L25.3733 14.9338L26.7867 13.5205C27.468 12.8395 28.0085 12.0309 28.3772 11.141C28.746 10.251 28.9358 9.29713 28.9358 8.33381C28.9358 7.3705 28.746 6.41662 28.3772 5.52667C28.0085 4.63673 27.468 3.82816 26.7867 3.14715Z" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                    </button>
                    <div class="delimeter-btn"></div>
                    <button type="button" class="product-action-btn sc-compare-btn" onclick="compare.add('{{ product_id }}');" title="{{ button_compare }}" aria-label="Compare button">
                        {#                                        <span class="sc-btn-icon sc-btn-icon-compare"></span>#}

                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.6667 21.334H28M14.6667 21.334L20 26.6673M14.6667 21.334L20 16.0007M17.3333 10.6673H4M17.3333 10.6673L12 16.0007M17.3333 10.6673L12 5.33398" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>

                    </button>
                </div>


                {#                <button type="button" name="button" class="sc-btn sc-btn-outline sc-btn-outline-primary br-4 small fsz-12 sc-product-one-click-btn" onclick="octPopPurchase('{{ product_id }}')">#}
                {#                    {{ oct_product_quickbuy }}#}
                {#                </button>#}

                <div class="sc-module-quantity" hidden>
                    <input type="hidden" class="form-control" name="quantity" value="{{ minimum }}" id="fixed-input-quantity"/>
                    <input type="hidden" name="product_id" value="{{ product_id }}"/>
                    <input type="hidden" id="fixed-min-product-quantity" value="{{ minimum }}" name="min_quantity">
                </div>
                <button type="button" class="sc-btn sc-btn-primary small br-4 fsz-12 sc-product-fixed-cart-btn br-8">
                    {#                    <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--btn-cart-icon" alt="" width="16" height="16" class="sc-btn-icon sc-btn-icon-cart-img">#}
                    <span class="sc-btn-text">Купити</span>
                </button>
            </div>
        </div>
        <script>
            window.addEventListener('DOMContentLoaded', () => {
                showProductButtons();
            });
        </script>
    {% endif %}

    <nav id="breadcrumb-mobile"  class="mobile-visible">
        <ul class="breadcrumb-mobile sc-breadcrumb fsz-14">
            {% for breadcrumb in mobile_breadcrumbs %}

                {% if loop.index == 1 %}
                    <div class="breadcrumb-mobile-button">
                        <svg class="breadcrumb-mobile-button-img" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 32 32" style="enable-background:new 0 0 512 512" xml:space="preserve" fill-rule="evenodd"><g><path d="M15 20c0-.796-.316-1.559-.879-2.121A2.996 2.996 0 0 0 12 17H5c-.796 0-1.559.316-2.121.879A2.996 2.996 0 0 0 2 20v7c0 .796.316 1.559.879 2.121A2.996 2.996 0 0 0 5 30h7c.796 0 1.559-.316 2.121-.879A2.996 2.996 0 0 0 15 27zm15 0c0-.796-.316-1.559-.879-2.121A2.996 2.996 0 0 0 27 17h-7c-.796 0-1.559.316-2.121.879A2.996 2.996 0 0 0 17 20v7c0 .796.316 1.559.879 2.121A2.996 2.996 0 0 0 20 30h7c.796 0 1.559-.316 2.121-.879A2.996 2.996 0 0 0 30 27zm-17 0v7a.997.997 0 0 1-1 1H5a.997.997 0 0 1-1-1v-7a.997.997 0 0 1 1-1h7a.997.997 0 0 1 1 1zm15 0v7a.997.997 0 0 1-1 1h-7a.997.997 0 0 1-1-1v-7a.997.997 0 0 1 1-1h7a.997.997 0 0 1 1 1zm-2.379-5.207 4.172-4.172a3 3 0 0 0 0-4.242l-4.172-4.172a3 3 0 0 0-4.242 0l-4.172 4.172a3 3 0 0 0 0 4.242l4.172 4.172a3 3 0 0 0 4.242 0zM15 5c0-.796-.316-1.559-.879-2.121A2.996 2.996 0 0 0 12 2H5c-.796 0-1.559.316-2.121.879A2.996 2.996 0 0 0 2 5v7c0 .796.316 1.559.879 2.121A2.996 2.996 0 0 0 5 15h7c.796 0 1.559-.316 2.121-.879A2.996 2.996 0 0 0 15 12zm13.379 4.207-4.172 4.172a1 1 0 0 1-1.414 0l-4.172-4.172a1 1 0 0 1 0-1.414l4.172-4.172a1 1 0 0 1 1.414 0l4.172 4.172a1 1 0 0 1 0 1.414zM13 5v7a.997.997 0 0 1-1 1H5a.997.997 0 0 1-1-1V5a.997.997 0 0 1 1-1h7a.997.997 0 0 1 1 1z" fill="#001f3f" opacity="1" data-original="#000000" class=""></path></g></svg>


                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" x="0" y="0" viewBox="0 0 24 24" style="enable-background:new 0 0 512 512" xml:space="preserve" class="breadcrumb-mobile-button-carret"><g><path fill="#001f3f" fill-rule="evenodd" d="M9.97 7.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06L13.44 12 9.97 8.53a.75.75 0 0 1 0-1.06z" clip-rule="evenodd" opacity="1" data-original="#000000" class=""></path></g></svg>

                        <li class="breadcrumb-item-mobile sc-breadcrumb-item">
                            <a class="breadcrumb-mobile-last-item" href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
                        </li>
                    </div>
                {% endif %}
            {% endfor %}

            {% if mobile_breadcrumbs|length > 1 %}
                <div class="breadcrumb-mobile-dropdown">
                    {% for breadcrumb in mobile_breadcrumbs %}
                        {% if loop.index != 1 %}
                            <div class="breadcrumb-mobile-button">
                                <li class="breadcrumb-item-mobile sc-breadcrumb-item">
                                    <a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
                                </li>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}

        </ul>
    </nav>

    <main class="main">
        <div id="content" class="row">
            <nav aria-label="breadcrumb" class="mobile-hide">
                <ul class="breadcrumb sc-breadcrumb fsz-14">
                    {% for breadcrumb in breadcrumbs %}
                        {% if loop.last %}
                            <li class="breadcrumb-item sc-breadcrumb-item">{{ breadcrumb.text }}</li>
                        {% else %}
                            <li class="breadcrumb-item sc-breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </nav>


            <script>
                $('.breadcrumb-mobile-button-img').click(function(){
                    $('.breadcrumb-mobile').toggleClass('active');
                });

                $(document).click(function(e) {
                    if (!$(e.target).closest('.breadcrumb-mobile').length) {
                        $('.breadcrumb-mobile').removeClass('active');
                    }
                });
            </script>


            <div class="col-12 sc-product-tabs-box sticky-md-top mt-md-3">
                <div id="oct-tabs" class="sc-product-tabs d-flex align-items-stretch w-100">
                    <div data-tab-target=".sc-product-content" class="sc-product-tab d-flex align-items-center justify-content-center active">
                        {#                        <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-info-icon" alt="" width="24" height="24">#}
                        <span class="sc-product-tab-title ps-2 fsz-14">{{ text_tab_description }}</span>
                    </div>
                    {% if attribute_groups %}
                        <div data-tab-target=".sc-product-content-attributes" class="sc-product-tab sc-product-tab-attributes d-flex align-items-center justify-content-center">
                            {#                            <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-attr-icon" alt="" width="24" height="24">#}
                            <span class="sc-product-tab-title ps-2 fsz-14">{{ tab_attribute }}</span>
                        </div>
                    {% endif %}
                    {% if review_status %}
                        <div data-tab-target="#review-question-wrapper" data-click="reviews" class="tab-trigger sc-product-tab sc-product-tab-reviews d-flex align-items-center justify-content-center">
                            {#                            <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-reviews-icon" alt="" width="24" height="24">#}
                            <span class="sc-product-tab-title ps-2 fsz-14">{{ tab_review_text }} {% if total_reviews > 0 %} ({{ total_reviews }}){% endif %}</span>
                        </div>
                    {% endif %}
                    {% if oct_product_faq %}
                        <div data-tab-target="#review-question-wrapper" data-click="asks" class="tab-trigger sc-product-tab d-flex align-items-center justify-content-center">
                            {#                            <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-faq-icon" alt="" width="24" height="24">#}
                            {{ tab_oct_faq }}
                        </div>
                    {% endif %}
                    {% if (dop_tab.title is defined and dop_tab.title) and (dop_tab.text is defined and dop_tab.text) %}
                        <div data-tab-target="#product_dop_tab" class="sc-product-tab d-flex align-items-center justify-content-center">
                            {#                            <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-extra-icon" alt="" width="24" height="24">#}
                            <span class="sc-product-tab-title ps-2 fsz-14">{{ dop_tab.title }}</span>
                        </div>
                    {% endif %}
                    {% if oct_product_extra_tabs %}
                        {% set key = 0 %}
                        {% for extra_tab in oct_product_extra_tabs %}
                            {% set key = key + 1 %}
                            <div data-tab-target="#product_extra_tab-{{ key }}" class="sc-product-tab d-flex align-items-center justify-content-center">
                                {#                                <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-tab-extra-icon" alt="" width="24" height="24">#}
                                <span class="sc-product-tab-title ps-2 fsz-14">{{ extra_tab.title }}</span>
                            </div>
                        {% endfor %}
                    {% endif %}
{#                    {% if products %}#}
{#                        <div data-tab-target="#sc-related-products_0" class="sc-product-tab d-flex align-items-center justify-content-center">#}
{#                            #}{#                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">#}
{#                            #}{#                                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.48149 7.43827C8.17078 7.80075 8 8.26243 8 8.73985V17C8 18.1046 8.89543 19 10 19H17.3308C18.2974 19 19.1257 18.3088 19.2986 17.3578L20.5713 10.3578C20.7945 9.13009 19.8514 8 18.6036 8H14L15.6279 3.11634C15.8414 2.47579 15.5514 1.77571 14.9475 1.47375V1.47375C14.3906 1.19532 13.7158 1.33161 13.3106 1.80431L8.48149 7.43827Z" stroke="#8F90A6"/>#}
{#                            #}{#                                <path d="M4 18V9" stroke="#8F90A6" stroke-linecap="round"/>#}
{#                            #}{#                            </svg>#}
{#                            <span class="sc-product-tab-title ps-2 fsz-14">{{ oct_related_products }}</span>#}
{#                        </div>#}
{#                    {% endif %}#}
                </div>
                <script>
                    window.addEventListener('DOMContentLoaded', () => {
                        octProductTabs();
                    });
                </script>
            </div>
            <div class="col-md-12 mobile-product-info">
                <h1 class="produc-page-h1">{{ heading_title }}</h1>
                <div class="sc-product-info d-flex d-flex sc-product-info-top">
                    {% if review_status %}
                        <div class="sc-product-info-right mobile-hide">
                            <div class="d-flex align-items-center">
                                <div class="sc-module-rating-stars d-flex align-items-center">
                                    {% for i in 1..5 %}
                                        {% if rating < i %}
                                            <span class="sc-module-rating-star"></span>
                                        {% else %}
                                            <span class="sc-module-rating-star sc-module-rating-star-is"></span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <span class="sc-product-info-item-badge dark-text">{{ total_reviews }} {{ oct_product_reviews }}</span>
                            </div>
                        </div>
                    {% endif %}

                    <div class="sc-product-info-left d-flex align-items-center mobile-hide">
                        {% if oct_showcase_data.product_model is defined and oct_showcase_data.product_model == 'on' %}
                            <div class=" ">
                                <span class="dark-text">Артикул (SKU)</span> <span class="color-blue fw-500">{{ model }}</span>
                            </div>
                        {% endif %}
                        {% if manufacturer %}
                            <div class=" {% if oct_showcase_data.product_model is defined and oct_showcase_data.product_model == 'on' %} ms-3{% endif %}">
                                <span class="dark-text">{{ text_manufacturer }}</span> <a href="{{ manufacturers }}" class="color-blue fw-500">{{ manufacturer }}</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div id="productImages" class="col-md-6">
                <div>

                    <!-- Основний слайдер -->
                    <div class="swiper product-images-slider product-images-grid">
                        <div class="swiper-wrapper ">
                            {% for key, image in images %}
                                <div class="swiper-slide">
                                    <a href="{{ image.popup }}" class="oct-gallery d-block" data-position="{{ key }}">
                                        <img src="{{ image.popup }}" class="d-block mx-auto" alt="{{ heading_title }}" title="{{ heading_title }}" width="{{ thumb_width }}" height="{{ thumb_height }}" />
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Слайдер мініатюр -->
                    <div class="swiper product-thumbs-slider">
                        <div class="swiper-wrapper">
                            {% for key, image in images %}
                                <div class="swiper-slide">
                                    <img src="{{ image.thumb }}" alt="thumb" width="80" height="80" />
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <script>
                        let mainSwiper;
                        let thumbsSwiper;

                        function initMobileSwiper() {
                            if (window.innerWidth <= 767 && !mainSwiper) {
                                thumbsSwiper = new Swiper('.product-thumbs-slider', {
                                    spaceBetween: 10,
                                    slidesPerView: 6,
                                    loop: false,
                                    freeMode: true,
                                    watchSlidesVisibility: true,
                                    watchSlidesProgress: true,
                                    breakpoints: {
                                        0: {
                                            slidesPerView: 3,
                                        },
                                        480: {
                                            slidesPerView: 4,
                                        },
                                        640: {
                                            slidesPerView: 5,
                                        },
                                        767: {
                                            slidesPerView: 5,
                                        }
                                    }
                                });

                                mainSwiper = new Swiper('.product-images-slider', {
                                    spaceBetween: 10,
                                    loop: false,

                                    thumbs: {
                                        swiper: thumbsSwiper,
                                    },
                                });
                            } else if (window.innerWidth > 767 && mainSwiper) {
                                mainSwiper.destroy(true, true);
                                thumbsSwiper.destroy(true, true);
                                mainSwiper = null;
                                thumbsSwiper = null;
                            }
                        }

                        window.addEventListener('load', initMobileSwiper);
                        window.addEventListener('resize', initMobileSwiper);

                    </script>

                    <script>
                        $('.product-images-grid .oct-gallery').on('click', function(e) {
                            e.preventDefault();

                            var trueIndex = $(this).attr('data-position') * 1;
                            console.log(trueIndex)


                            $.fancybox.open(
                                $('.product-images-grid .oct-gallery'),
                                {
                                    backFocus: false,
                                    hideScrollbar: false,
                                    loop : true,
                                    animationEffect : 'fade'
                                },
                                trueIndex
                            );

                            return false;
                        });
                    </script>


                </div>
                <div class="">
                    <div class="sc-module-stickers d-flex align-items-center justify-content-between">
                        <div class="sc-module-stickers-left d-flex align-items-center">
                            {% if special and oct_sticker_you_save %}
                                <div id="main-product-you-save" class="sc-module-sticker br-4 fsz-10 fw-500 sc-module-sticker-red">{{ you_save }}</div>
                            {% endif %}
                            {% if oct_product_stickers %}
                                {% for key, oct_sticker in oct_product_stickers %}
                                    {% if oct_sticker is not empty and oct_sticker is iterable %}
                                        <div class="sc-module-sticker sc-module-sticker-image pe-0 py-0 order-1">
                                            <img src="{{ oct_sticker.image }}" alt="{{ oct_sticker.title }}" data-bs-html="true" data-bs-placement="bottom" data-bs-toggle="popover" data-bs-trigger="hover" title="{{ oct_sticker.title }}" data-bs-content="{{ oct_sticker.description }}" width="24" height="24" />
                                        </div>
                                    {% elseif oct_sticker is not empty %}
                                        <div class="sc-module-sticker br-4 fsz-10 fw-500 sc-module-sticker-{{ key }}">
                                            {{ oct_sticker }}
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="sc-module-sticker br-4 fsz-10 fw-500 sc-module-sticker-green{% if out_of_stock %} out-of-stock{% endif %}">{% if oct_stock_display and not out_of_stock %} {{ oct_product_config_stock_display }} {% endif %}{{ stock }}</div>
                    </div>
                    {#                    <div class="d-none">#}
                    {#                        {% if thumb or images %}#}
                    {#                    {% if thumb %}#}
                    {#                        <div class="sc-product-images-main px-3">#}
                    {#                            <div class="sc-product-images-slide pb-3 pb-md-4">#}
                    {#                                <a href="{{ popup }}" class="oct-gallery d-block" onclick="return false;">#}
                    {#                                    <img src="{{ thumb }}" class="d-block mx-auto" alt="{{ heading_title }}" title="{{ heading_title }}" width="{{ thumb_width }}" height="{{ thumb_height }}" />#}
                    {#                                </a>#}
                    {#                            </div>#}
                    {#                            {% for key, image in images %}#}
                    {#                                {% set i = key + 1 %}#}
                    {#                                {% if loop.index0 > 0 %}#}
                    {#                                    <div class="sc-product-images-slide pb-3 pb-md-4">#}
                    {#                                        <a href="{{ image.popup_fancy }}" class="oct-gallery d-block" onclick="return false;">#}
                    {#                                            <img src="{{ image.popup }}" class="d-block mx-auto" alt="{{ heading_title }}" title="{{ heading_title }}" width="{{ thumb_width }}" height="{{ thumb_height }}" />#}
                    {#                                        </a>#}
                    {#                                    </div>#}
                    {#                                {% endif %}#}
                    {#                            {% endfor %}#}
                    {#                        </div>#}
                    {#                    {% endif %}#}
                    {#                    {% if images %}#}
                    {#                        <div class="sc-product-images-additional mt-xxl-3 d-none d-md-flex align-items-stretch">#}
                    {#                            {% for key, image in images %}#}
                    {#                                {% set i = key + 1 %}#}
                    {#                                <a class="sc-product-images-additional-item" href="{{ image.popup }}" onClick="return false;" data-href="{{ image.popup }}">#}
                    {#                                    <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" width="{{ image.images_width }}" height="{{ image.images_height }}" />#}
                    {#                                </a>#}
                    {#                            {% endfor %}#}
                    {#                        </div>#}
                    {#                    {% endif %}#}
                    {#                        <script>#}
                    {#                            $(function() {#}
                    {#                                setTimeout(function() {#}
                    {#                                    $('#image-additional').slick('refresh');#}
                    {#                                    $('.image-additional-box').addClass('overflow-visible');#}
                    {#                                }, 500);#}

                    {#                                var sliderProducts = $('.sc-product-images-main a');#}

                    {#                                sliderProducts.on('click', function(e) {#}
                    {#                                    e.preventDefault();#}

                    {#                                    var totalSlides = $(this).parents('.sc-product-images-main').slick("getSlick").slideCount,#}
                    {#                                        dataIndex = $(this).parents('.sc-product-images-slide').data('slick-index'),#}
                    {#                                        trueIndex;#}

                    {#                                    switch(true) {#}
                    {#                                        case (dataIndex < 0):#}
                    {#                                            trueIndex = totalSlides+dataIndex;#}

                    {#                                            break;#}
                    {#                                        case (dataIndex >= totalSlides):#}
                    {#                                            trueIndex = dataIndex%totalSlides;#}

                    {#                                            break;#}
                    {#                                        default:#}
                    {#                                            trueIndex = dataIndex;#}
                    {#                                    }#}

                    {#                                    $.fancybox.open(#}
                    {#                                        sliderProducts,#}
                    {#                                        {#}
                    {#                                            backFocus: false,#}
                    {#                                            hideScrollbar: false,#}
                    {#                                            loop : true#}
                    {#                                        },#}
                    {#                                        trueIndex#}
                    {#                                    );#}

                    {#                                    return false;#}
                    {#                                });#}

                    {#                                {% if images %}#}
                    {#                                $('.sc-product-images-main').slick({#}
                    {#                                    infinite: true,#}
                    {#                                    slidesToShow: 1,#}
                    {#                                    slidesToScroll: 1,#}
                    {#                                    fade: false,#}
                    {#                                    draggable: false,#}
                    {#                                    asNavFor: '.sc-product-images-additional',#}
                    {#                                    dots: false,#}
                    {#                                    arrows: false,#}
                    {#                                    responsive: [#}
                    {#                                        {#}
                    {#                                            breakpoint: 768,#}
                    {#                                            settings: {#}
                    {#                                                dots: {% if images|length <= 1 %}false{% else %}true{% endif %}#}
                    {#                                            }#}
                    {#                                        }#}
                    {#                                    ]#}
                    {#                                });#}
                    {#                                $('.sc-product-images-additional').slick({#}
                    {#                                    infinite: {% if images|length > 3 %}true{% else %}false{% endif %},#}
                    {#                                    slidesToShow: 6,#}
                    {#                                    slidesToScroll: 1,#}
                    {#                                    focusOnSelect: true,#}
                    {#                                    asNavFor: '.sc-product-images-main',#}
                    {#                                    dots: false,#}
                    {#                                    prevArrow: '<button type="button" class="slick-slider-btn slick-slider-btn-prev sc-btn sc-btn-outline sc-btn-outline-secondary sc-btn-with-icon br-4 overflow-hidden"><span class="sc-btn-icon" aria-label="Previous"></span></button>',#}
                    {#                                    nextArrow: '<button type="button" class="slick-slider-btn slick-slider-btn-next sc-btn sc-btn-outline sc-btn-outline-secondary sc-btn-with-icon br-4 overflow-hidden"><span class="sc-btn-icon" aria-label="Next"></span></button>',#}
                    {#                                    responsive: [#}
                    {#                                        {#}
                    {#                                            breakpoint: 1600,#}
                    {#                                            settings: {#}
                    {#                                                slidesToShow: 6,#}
                    {#                                                slidesToScroll: 1#}
                    {#                                            }#}
                    {#                                        }, {#}
                    {#                                            breakpoint: 1200,#}
                    {#                                            settings: {#}
                    {#                                                slidesToShow: 6,#}
                    {#                                                slidesToScroll: 1#}
                    {#                                            }#}
                    {#                                        }, {#}
                    {#                                            breakpoint: 992,#}
                    {#                                            settings: {#}
                    {#                                                slidesToShow: 6,#}
                    {#                                                slidesToScroll: 1#}
                    {#                                            }#}
                    {#                                        }, {#}
                    {#                                            breakpoint: 376,#}
                    {#                                            settings: {#}
                    {#                                                slidesToShow: 6,#}
                    {#                                                slidesToScroll: 1#}
                    {#                                            }#}
                    {#                                        }#}
                    {#                                    ]#}
                    {#                                });#}
                    {#                                {% else %}#}
                    {#                                $('.sc-product-images-main').slick({});#}
                    {#                                {% endif %}#}
                    {#                            });#}
                    {#                        </script>#}
                    {#                    {% endif %}#}
                    {#                    </div>#}
                </div>
            </div>
            <div id="product" class="col-md-6">

                <div class="detail-product-info">
                    <div class="desktop-product-info">
                        <h1 class="produc-page-h1">{{ heading_title }}</h1>
                        <div class="sc-product-info d-flex d-flex sc-product-info-top">

                            {% if review_status %}
                                <div class="sc-product-info-right ">
                                    <div class="d-flex align-items-center">
                                        <div class="sc-module-rating-stars d-flex align-items-center">
                                            {% for i in 1..5 %}
                                                {% if rating < i %}
                                                    <span class="sc-module-rating-star"></span>
                                                {% else %}
                                                    <span class="sc-module-rating-star sc-module-rating-star-is"></span>
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                        <span class="sc-product-info-item-badge dark-text">{{ total_reviews }} {{ oct_product_reviews }}</span>
                                    </div>
                                </div>
                            {% endif %}

                            <div class="sc-product-info-left d-flex align-items-center">
                                {% if oct_showcase_data.product_model is defined and oct_showcase_data.product_model == 'on' %}
                                    <div class=" ">
                                        <span class="dark-text">Артикул (SKU)</span> <span class="dark-text fw-500">{{ model }}</span>
                                    </div>
                                {% endif %}
                                {% if manufacturer %}
                                    <div class=" {% if oct_showcase_data.product_model is defined and oct_showcase_data.product_model == 'on' %} ms-3{% endif %}">
                                        <span class="dark-text">{{ text_manufacturer }}</span> <a href="{{ manufacturers }}" class="color-blue fw-500">{{ manufacturer }}</a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="content-block sc-product-actions p-0 mobile-no-radius no-hover-shadow">
                        <div class="sc-product-actions-top sc-product-actions-top-desktop d-flex justify-content-between pb-4 with-border">
                            <div class="sc-product-actions-top-left">
                                {% if oct_popup_found_cheaper_status is defined and oct_popup_found_cheaper_status == 'on' and can_buy %}
                                    <span class="blue-link fsz-12" onclick="octPopupFoundCheaper('{{ product_id }}');">{{ oct_product_cheaper }}</span>
                                {% endif %}
                                {% if price %}

                                {% if not special %}
                                    <div class="sc-module-price-km">
                                        <div class="sc-module-price-km-prices">
                                            <div class="km-price-regular">{{ price }}</div>
                                        </div>
                                        <div class="sc-module-price-km-usdt">
                                            {{ usdt_price }} usdt
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="sc-module-price-km">
                                        <div class="sc-module-price-km-prices">
                                            <div class="km-price-linethrow">{{ price }}</div>
                                            <div class="km-price-special">{{ special }}</div>
                                        </div>
                                        <div class="sc-module-price-km-usdt">
                                            {{ usdt_price }} usdt
                                        </div>
                                    </div>

                                {% if product_timer %}
                                    <div class="sc-product-timer d-flex-inline mt-2">
                                        <div class="sc-product-timer-text dark-text fw-600 fsz-12">{{ oct_product_timer }}</div>
                                        <div class="sc-product-timer-inner d-inline-flex align-items-start justify-content-center">
                                            <div class="d-flex flex-column align-items-center">
                                                <div id="sc-timer-days" class="sc-product-timer-number red fw-600"></div>
                                                <span class="dark-text fsz-10">{{ oct_product_timer_days }}</span>
                                            </div>
                                            <div class="sc-product-timer-delimiter animated">:</div>
                                            <div class="d-flex flex-column align-items-center">
                                                <div id="sc-timer-hours" class="sc-product-timer-number red fw-600"></div>
                                                <span class="dark-text fsz-10">{{ oct_product_timer_hours }}</span>
                                            </div>
                                            <div class="sc-product-timer-delimiter animated">:</div>
                                            <div class="d-flex flex-column align-items-center">
                                                <div id="sc-timer-minutes" class="sc-product-timer-number red fw-600"></div>
                                                <span class="dark-text fsz-10">{{ oct_product_timer_minutes }}</span>
                                            </div>
                                            <div class="sc-product-timer-delimiter animated">:</div>
                                            <div class="d-flex flex-column align-items-center">
                                                <div id="sc-timer-seconds" class="sc-product-timer-number red fw-600"></div>
                                                <span class="dark-text fsz-10">{{ oct_product_timer_seconds }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <script>
                                        timerSpecial('.sc-product-timer', '{{ special_date_end }}T00:00:00');
                                    </script>
                                {% endif %}
                                {% endif %}

                                    <div class="sc-module-price-box ">

                                        {# % if tax %}
                                            <div class="price-tax fsz-10 fw-300 mt-1">{{ text_tax }}
                                                <span>{{ tax }}</span>
                                            </div>
                                        {% endif %#}

                                        {% if discounts %}
                                            {% for discount in discounts %}
                                                <div class="sc-product-price-discount fsz-12 mt-1">{{ discount.quantity }}{{ text_discount }}{{ discount.price }}</div>
                                            {% endfor %}
                                        {% endif %}
                                        {% if minimum > 1 %}
                                            <div class="sc-product-option-minquant fsz-12 mt-1">{{ text_minimum }}</div>
                                        {% endif %}
                                        {% if points %}
                                            <div class="sc-product-option-bonus fsz-12 mt-1">{{ text_points }}
                                                {{ points }}</div>
                                        {% endif %}
                                        {% if reward %}
                                            <div class="sc-product-option-bonus fsz-12 mt-1">{{ text_reward }}
                                                {{ reward }}</div>
                                        {% endif %}
                                        {% if recurrings %}
                                            <div class="form-group d-flex flex-column flex-md-row align-items-md-center">
                                                <div class="sc-control-label fw-600 dark-text fsz-14">{{ text_payment_recurring }}
                                                    <span class="required"> *</span></div>
                                                <div class="form-group">
                                                    <select name="recurring_id" class="sc-select form-control">
                                                        <option value="">{{ text_select }}</option>
                                                        {% for recurring in recurrings %}
                                                            <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                    <div class="help-block" id="recurring-description"></div>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </div>
                                {% endif %}

                                {% if product_js_button is defined and product_js_button %}
                                    <div class="sc-product-social-buttons mt-3">{{ product_js_button }}</div>
                                {% endif %}
                            </div>

                            {# % if price %}
                                {% if not special %}
                                    <div class="usdt">
                                        <img src="/image/usdt_logo.svg" alt="USDt">
                                        <span class="usdt_value">{{ usdt_price }}</span>
                                        <span class="usdt_name">USDT</span>
                                        <span class="usdt_info">?
                                            <span class="usdt_info_item">
                                                <span class="usdt_info_item_text">{{ usdt_info }}</span>
                                            </span>
                                        </span>
                                    </div>
                                {% endif %}
                            {% endif %#}



                            <div class="sc-product-actions-top-right d-flex align-items-start gap-2">
                                <button type="button" class="product-action-btn sc-wishlist-btn " onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}" aria-label="Wishlist button">

                                    <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M26.7867 3.14715C26.1057 2.46582 25.2971 1.92534 24.4071 1.55659C23.5172 1.18784 22.5633 0.998047 21.6 0.998047C20.6367 0.998047 19.6828 1.18784 18.7929 1.55659C17.9029 1.92534 17.0943 2.46582 16.4133 3.14715L15 4.56048L13.5867 3.14715C12.2111 1.77156 10.3454 0.99876 8.4 0.99876C6.45462 0.99876 4.58892 1.77156 3.21333 3.14715C1.83774 4.52274 1.06494 6.38844 1.06494 8.33381C1.06494 10.2792 1.83774 12.1449 3.21333 13.5205L4.62666 14.9338L15 25.3071L25.3733 14.9338L26.7867 13.5205C27.468 12.8395 28.0085 12.0309 28.3772 11.141C28.746 10.251 28.9358 9.29713 28.9358 8.33381C28.9358 7.3705 28.746 6.41662 28.3772 5.52667C28.0085 4.63673 27.468 3.82816 26.7867 3.14715Z" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>

                                </button>
                                <button type="button" class="product-action-btn sc-compare-btn" onclick="compare.add('{{ product_id }}');" title="{{ button_compare }}" aria-label="Compare button">
                                    {#                                        <span class="sc-btn-icon sc-btn-icon-compare"></span>#}

                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14.6667 21.334H28M14.6667 21.334L20 26.6673M14.6667 21.334L20 16.0007M17.3333 10.6673H4M17.3333 10.6673L12 16.0007M17.3333 10.6673L12 5.33398" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>

                                </button>
                            </div>
                        </div>
                        {% if can_buy %}
                            <div class="sc-product-actions-middle">
                                {% if options %}
                                    <div id="sc-product-options" class="sc-product-options mb-4">
                                        {% for option in options %}
                                            {% if option.type == 'select' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14 mb-2" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>
                                                        {% endif %}
                                                    </label>
                                                    <select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="sc-select form-control">
                                                        <option value="">{{ text_select }}</option>
                                                        {% for option_value in option.product_option_value %}
                                                            <option value="{{ option_value.product_option_value_id }}">{{ option_value.name }}
                                                                {% if option_value.price %}
                                                                    ({{ option_value.price_prefix }}{{ option_value.price }})
                                                                {% endif %}
                                                            </option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'radio' %}
                                                <div class="form-group d-flex flex-column flex-md-row align-items-md-center mb-3">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <div id="input-option{{ option.product_option_id }}" class="options-box d-flex mt-3 mt-sm-0">
                                                        {% for option_value in option.product_option_value %}
                                                            <div class="radio">
                                                                <label
                                                                        data-bs-toggle="tooltip"
                                                                        data-bs-placement="top"
                                                                        class="option optid-{{ option.product_option_id }} not-selected{% if option_value.image %} radio-img{% else %} sc-radio{% endif %}{% if option.option_id in allowed_options_ids and loop.index == 1 %} auto-choose{% endif %}"
                                                                        title="{{ option_value.name }} {% if option_value.price %}{{ option_value.price_prefix }}{{ option_value.price }}{% endif %}">
                                                                    <input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" class="input-radio"/>
                                                                    {% if option_value.image %}
                                                                        <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" width="50" height="50" />
                                                                    {% else %}
                                                                        {{ option_value.name }}
                                                                    {% endif %}
                                                                </label>
                                                                <script>
                                                                    $(document).ready(function() {
                                                                        $(document).on('click', 'label.optid-{{ option.product_option_id }}', function(event) {
                                                                            $('label.optid-{{ option.product_option_id }}').removeClass('selected').addClass('not-selected');
                                                                            $(this).removeClass('not-selected').addClass('selected');
                                                                        });
                                                                    });
                                                                </script>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'checkbox' %}
                                                <div class="form-checkbox-group mb-3">
                                                    <div class="sc-control-label fw-600 dark-text fsz-14 mb-2">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </div>
                                                    <div id="input-option{{ option.product_option_id }}">
                                                        {% for option_value in option.product_option_value %}
                                                            <div class="form-check d-flex align-items-center mb-0">
                                                                <label class="form-check-label">
                                                                    {% if option_value.image %}<img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" width="50" height="50" />{% endif %}
                                                                    <input type="checkbox" id="option[{{ option.product_option_id }}][{{ option_value.product_option_value_id }}]" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" class="form-check-input"/>
                                                                    {{ option_value.name }}
                                                                    {% if option_value.price %}
                                                                        ({{ option_value.price_prefix }}{{ option_value.price }})
                                                                    {% endif %}
                                                                </label>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'text' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>
                                                        {% endif %}
                                                    </label>
                                                    <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" inputmode="text">
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'textarea' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'file' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="sc-btn sc-btn-primary br-4">
                                                        <i class="fa fa-upload me-2"></i>
                                                        {{ button_upload }}</button>
                                                    <input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}"/>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'date' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <div class="input-group date">
                                                        <input type="date" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" id="input-option{{ option.product_option_id }}" class="form-control"/>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'datetime' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <div class="input-group datetime">
                                                        <input type="datetime-local" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" id="input-option{{ option.product_option_id }}" class="form-control"/>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            {% if option.type == 'time' %}
                                                <div class="form-group">
                                                    <label class="sc-control-label fw-600 dark-text fsz-14" for="input-option{{ option.product_option_id }}">{{ option.name }}
                                                        {% if option.required %}
                                                            <span class="required option-required"> *</span>{% endif %}
                                                    </label>
                                                    <div class="input-group time">
                                                        <input type="time" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" id="input-option{{ option.product_option_id }}" class="form-control"/>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                {% endif %}

                                <div class="sc-product-buttons d-flex align-items-center m-col-wrap">
                                    <div class="quanitty-mobile-100 hidden">
                                        <div class="sc-module-quantity d-flex align-items-center justify-content-center py-1 br-12">
                                            <button type="button" aria-label="Minus" class="sc-module-quantity-btn d-flex align-items-center justify-content-center" onclick="updateValueProduct(true, false, false);">
                                                <span class="minus"></span>
                                            </button>
                                            <input type="text" class="form-control" name="quantity" value="{{ minimum }}" id="input-quantity" aria-label="Quantity" inputmode="numeric">
                                            <button type="button" aria-label="Plus" class="sc-module-quantity-btn d-flex align-items-center justify-content-center" onclick="updateValueProduct(false, true, false);">
                                                <span class="plus"></span>
                                            </button>
                                            <input type="hidden" name="product_id" value="{{ product_id }}"/>
                                            <input type="hidden" id="min-product-quantity" value="{{ minimum }}" name="min_quantity">
                                            <input type="hidden" id="max-product-quantity" value="{{ max_quantity }}" name="max_quantity">
                                        </div>
                                    </div>
                                    <button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="sc-btn sc-btn-primary br-12 ">
                                        {#                                    <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--btn-cart-icon" alt="" width="20" height="20" class="sc-btn-icon sc-btn-icon-cart-img">#}
                                        <span class="sc-btn-text">
                                            {% if data_preorder == 1 %}
                                                {{ preorder_text }}
                                            {% else %}
                                                {{ cart_text2 }}
                                            {% endif %}
                                           </span>
                                    </button>
                                    <button id="mono_checkout_product_page" class="mono_checkout__button mono_checkout__button--black br-12" data-order-price="{{ price_for_ads | number_format(0, '.', '') }}">
                                        {{ order_with }}
                                        <img src="catalog/view/theme/default/image/mono_checkout/monocheckout_logo_white.svg" alt="button_logo">
                                    </button>

                                    {#                                {% if oct_popup_purchase_status is defined and can_buy %}#}
                                    {#                                    <button type="button" class="sc-btn sc-btn-secondary d-none d-md-flex br-4 fsz-12 fw-400 p-3 sc-product-one-click-btn" onclick="octPopPurchase('{{ product_id }}')"><span class="sc-btn-text">{{ oct_product_quickbuy }}</span></button>#}
                                    {#                                {% endif %}#}
                                </div>
                            </div>
                            <button id="mono_checkout_product_page" class="custom mono_checkout__button mono_checkout__button--black br-12 w-100" data-order-price="{{ price_for_ads | number_format(0, '.', '') }}">
                                {{ order_with }}
                                <img src="catalog/view/theme/default/image/mono_checkout/monocheckout_logo_white.svg" alt="button_logo">
                            </button>
                            <div class="sc-product-actions-top-mobile">
                                <div class="sc-product-actions-top-right d-flex align-items-start gap-2">
                                    <button type="button" class="product-action-btn sc-wishlist-btn " onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}" aria-label="Wishlist button">

                                        <svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M26.7867 3.14715C26.1057 2.46582 25.2971 1.92534 24.4071 1.55659C23.5172 1.18784 22.5633 0.998047 21.6 0.998047C20.6367 0.998047 19.6828 1.18784 18.7929 1.55659C17.9029 1.92534 17.0943 2.46582 16.4133 3.14715L15 4.56048L13.5867 3.14715C12.2111 1.77156 10.3454 0.99876 8.4 0.99876C6.45462 0.99876 4.58892 1.77156 3.21333 3.14715C1.83774 4.52274 1.06494 6.38844 1.06494 8.33381C1.06494 10.2792 1.83774 12.1449 3.21333 13.5205L4.62666 14.9338L15 25.3071L25.3733 14.9338L26.7867 13.5205C27.468 12.8395 28.0085 12.0309 28.3772 11.141C28.746 10.251 28.9358 9.29713 28.9358 8.33381C28.9358 7.3705 28.746 6.41662 28.3772 5.52667C28.0085 4.63673 27.468 3.82816 26.7867 3.14715Z" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        <span>Подобається</span>
                                    </button>

                                    <div class="delimeter-btn"></div>

                                    <button type="button" class="product-action-btn sc-compare-btn" onclick="compare.add('{{ product_id }}');" title="{{ button_compare }}" aria-label="Compare button">
                                        {#                                        <span class="sc-btn-icon sc-btn-icon-compare"></span>#}

                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M14.6667 21.334H28M14.6667 21.334L20 26.6673M14.6667 21.334L20 16.0007M17.3333 10.6673H4M17.3333 10.6673L12 16.0007M17.3333 10.6673L12 5.33398" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                        <span>Порівняти</span>
                                    </button>
                                </div>
                            </div>
                            <div class="product-second-line">
                                <div class="product-second-line-1">{{ oct_byoneclick }}</div>
                                <div class="product-second-line-2"></div>
                            </div>
                        {% else %}
                            <div class="sc-product-actions-middle mb-2">
                                <div class="sc-product-buttons"></div>
                            </div>
                            {% if oct_stock_notifier_status is defined and oct_stock_notifier_status is not empty %}
                                <div class="pb-3">
                                    <button onclick="octStockNotifier('{{ product_id }}');" type="button" class="sc-btn sc-btn-primary br-4 sc-stock-notifier-btn">
                                        <span class="sc-btn-text">{{ oct_stock_notifier_text }}</span>
                                    </button>
                                </div>
                                <script>
                                    function octStockNotifier(product_id) {
                                        masked('body', true);

                                        $(".modal-backdrop").remove();

                                        $.ajax({
                                            type: 'post',
                                            dataType: 'html',
                                            url: 'index.php?route=octemplates/module/oct_stock_notifier',
                                            data: 'product_id=' + product_id,
                                            cache: false,
                                            success: function (data) {
                                                masked('body', false);
                                                $(".modal-holder").html(data);
                                                $("#octStockNotifier").modal("show");
                                                popupClose();
                                            }
                                        });
                                    }
                                </script>
                            {% endif %}
                        {% endif %}

                        <div class="swiper-container-squares-arrows">
                            {#                            <div class="swiper-button-next"></div>#}
                            {#                            <div class="swiper-button-prev"></div>#}

                            <div class="swiper-container-squares">
                                <div class="squares-wrapper swiper-wrapper">

                                    <a href="javascript:open_popup('offdist')"  class="square-item">

                                        <div class="square-short-info" >
                                            <span class="sqaure_info">
                                                <img src="/image/icons/info_gradient.svg">
                                            </span>
                                        </div>


                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6.04802 9.25174L6.04802 9.25164C6.12736 7.77281 7.26858 6.569 8.74037 6.41226C8.74045 6.41225 8.74052 6.41225 8.74059 6.41224C8.74067 6.41223 8.74074 6.41222 8.74082 6.41221L10.9498 6.17864L10.9518 6.17843C11.3705 6.13305 11.7645 5.95793 12.0788 5.67756L12.0808 5.67577L13.734 4.19021L13.7348 4.18952C14.2674 3.70962 14.9539 3.43567 15.6706 3.41703C16.3873 3.3984 17.0871 3.63631 17.644 4.08789L17.6456 4.08919L19.3755 5.48415C19.3758 5.48444 19.3762 5.48472 19.3765 5.485C19.7052 5.7517 20.1102 5.90359 20.5264 5.92761L20.5294 5.92777L22.749 6.04712L22.749 6.04713C24.2282 6.12647 25.4321 7.2679 25.5887 8.73973L25.8223 10.9486L25.8225 10.9505C25.8679 11.3692 26.043 11.7633 26.3234 12.0775L26.3252 12.0795L27.8108 13.7327C27.8108 13.7327 27.8108 13.7327 27.8109 13.7327C28.8014 14.835 28.8439 16.4922 27.9127 17.6429L27.9119 17.6439L26.5151 19.3757L26.5136 19.3776C26.2513 19.7049 26.0974 20.1059 26.0733 20.5248L26.0732 20.5275L25.9538 22.747L25.9537 22.7487C25.9169 23.4648 25.6255 24.1442 25.132 24.6645C24.6386 25.1848 23.9755 25.5117 23.2622 25.5864L23.2614 25.5864L21.052 25.8201L21.0501 25.8203C20.6314 25.8656 20.2373 26.0408 19.923 26.3211L19.921 26.3229L18.2678 27.8085L18.267 27.8092C17.7344 28.2891 17.0479 28.563 16.3312 28.5817C15.6145 28.6003 14.9147 28.3624 14.3579 27.9108L14.3562 27.9095L12.6242 26.5128L12.6224 26.5114C12.295 26.249 11.8941 26.0951 11.4752 26.0711L11.4725 26.0709L9.25287 25.9516L9.25109 25.9515C8.53492 25.9147 7.85545 25.6233 7.33514 25.1299C6.81483 24.6364 6.4879 23.9734 6.41326 23.2602L6.41318 23.2594L6.17954 21.0501L6.17933 21.0482C6.13395 20.6295 5.95881 20.2354 5.67841 19.9212L5.67663 19.9192L4.19097 18.266L4.19028 18.2652C3.71035 17.7327 3.4364 17.0462 3.41777 16.3296C3.39913 15.613 3.63704 14.9132 4.08864 14.3565L4.08995 14.3548L5.48672 12.623L5.48818 12.6211C5.75054 12.2938 5.90445 11.8928 5.92851 11.4739L5.92866 11.4712L6.04802 9.25174Z" stroke="#001F3F" stroke-width="1.5"/>
                                            <path d="M20.3344 12L22 13.3333L16.066 18.9223L14.8999 20L13.7338 18.9223L10 15.3333L11.6656 14.0334L14.8999 17.0225L20.3344 12Z" fill="#001F3F"/>
                                        </svg>

                                        <span>{{ text_off_dist }}</span>
                                    </a>

                                    <a href="javascript:open_popup('freedelivery')" class="square-item">
                                        <div class="square-short-info" >
                                            <span class="sqaure_info">
                                                <img src="/image/icons/info_gradient.svg">
                                            </span>
                                        </div>

                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M22.6667 26.6673C24.1394 26.6673 25.3333 25.4734 25.3333 24.0007C25.3333 22.5279 24.1394 21.334 22.6667 21.334C21.1939 21.334 20 22.5279 20 24.0007C20 25.4734 21.1939 26.6673 22.6667 26.6673Z" stroke="#001F3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M9.33341 26.6673C10.8062 26.6673 12.0001 25.4734 12.0001 24.0007C12.0001 22.5279 10.8062 21.334 9.33341 21.334C7.86066 21.334 6.66675 22.5279 6.66675 24.0007C6.66675 25.4734 7.86066 26.6673 9.33341 26.6673Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M6.66675 23.9633C5.20408 23.8913 4.29341 23.674 3.64275 23.0246C2.99208 22.3753 2.77608 21.4633 2.70408 20.0007M12.0001 24.0006H20.0001M25.3334 23.9633C26.7961 23.8913 27.7067 23.674 28.3574 23.0246C29.3334 22.0473 29.3334 20.4767 29.3334 17.334V14.6673H23.0667C22.0734 14.6673 21.5774 14.6673 21.1761 14.5367C20.7759 14.4066 20.4121 14.1837 20.1146 13.8861C19.817 13.5886 19.5941 13.2249 19.4641 12.8247C19.3334 12.4233 19.3334 11.9273 19.3334 10.934C19.3334 9.44465 19.3334 8.70065 19.1374 8.09798C18.9423 7.49768 18.608 6.95207 18.1617 6.50574C17.7153 6.05942 17.1697 5.72505 16.5694 5.52998C15.9667 5.33398 15.2227 5.33398 13.7334 5.33398H2.66675M2.66675 10.6673H10.6667M2.66675 14.6673H8.00008" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M19.3335 8H21.7615C23.7028 8 24.6722 8 25.4615 8.472C26.2522 8.94267 26.7122 9.79733 27.6322 11.5067L29.3335 14.6667" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>

                                        <span>{{ text_FreeDelivery }}</span>
                                    </a>

                                    <a href="javascript:open_popup('cryptopay')" class="square-item">
                                        <div class="square-short-info" >
                                        <span  class="sqaure_info">
                                            <img src="/image/icons/info_gradient.svg">
                                        </span>
                                        </div>
                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M20.5 24.5V18.5H29.5V24.5C29.5 26.2109 28.5087 27.8267 26.8969 28.5431L26.8969 28.5429L26.885 28.5486L25 29.4462L23.115 28.5486L23.1129 28.5476C21.5799 27.8262 20.5 26.1974 20.5 24.5ZM22 19.5H21.5V20V24.5C21.5 25.9062 22.3226 27.0703 23.4764 27.6472L23.4834 27.6507L23.4905 27.654L24.7905 28.254L25 28.3507L25.2095 28.254L26.5095 27.654L26.5166 27.6507L26.5236 27.6472C27.6861 27.066 28.5 25.797 28.5 24.5V20V19.5H28H22Z" fill="black" stroke="#001F3F"/>
                                            <path d="M22 12C23.1046 12 24 11.1046 24 10C24 8.89543 23.1046 8 22 8C20.8954 8 20 8.89543 20 10C20 11.1046 20.8954 12 22 12Z" fill="black"/>
                                            <path d="M21 2C16 2 12 6 12 11C12 11.9 12.1 12.8 12.4 13.6L2 24V30H8L18 20L16.6 18.6L13.8 21.4L12.4 20L11 21.4L12.4 22.8L10.8 24.4L9.4 23L8 24.4L9.4 25.8L7.2 28H4V24.8L13.8 15L14.6 14.2L14.3 13C14.1 12.3 14 11.7 14 11C14 7.1 17.1 4 21 4C24.9 4 28 7.1 28 11C28 12.5 27.5 13.9 26.7 15H29C29.6 13.8 29.9 12.4 29.9 11C30 6 26 2 21 2Z" fill="black"/>
                                        </svg>
                                        <span>{{text_cryptopay}}</span>
                                    </a>

                                    <a href="javascript:open_popup('payment')" class="square-item">
                                        <div class="square-short-info" >
                                        <span class="sqaure_info">
                                            <img src="/image/icons/info_gradient.svg">
                                        </span>
                                        </div>


                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <g clip-path="url(#clip0_3741_78301)">
                                                <path d="M4.7348 21.1555L4.73461 21.1556C4.67668 21.1891 4.61261 21.2106 4.54621 21.2189C4.47981 21.2271 4.41243 21.222 4.34805 21.2038C4.28367 21.1855 4.22362 21.1545 4.17143 21.1126C4.11925 21.0707 4.07601 21.0188 4.04427 20.9599L3.60411 21.1971L4.04447 20.9603C2.65691 18.3799 2.3065 15.3673 3.06478 12.5374C3.82302 9.70757 5.63266 7.27385 8.12431 5.73298C8.18125 5.69784 8.24467 5.67448 8.3108 5.6643C8.37693 5.65411 8.44444 5.65731 8.50932 5.67369C8.5742 5.69007 8.63513 5.71931 8.68849 5.75967C8.74187 5.80003 8.78659 5.8507 8.82002 5.90866L8.82013 5.90884L14.1508 15.1418C14.2887 15.3807 14.2067 15.6869 13.9678 15.8248L4.7348 21.1555ZM12.6018 15.4588L13.0348 15.2088L12.7848 14.7758L8.49544 7.34646L8.20947 6.85115L7.75681 7.20074C5.93541 8.60741 4.62631 10.5732 4.03068 12.7962C3.43505 15.0191 3.58584 17.3761 4.45988 19.505L4.6771 20.0341L5.17242 19.7482L12.6018 15.4588ZM12.7075 6.55705L12.2104 6.61121L12.7075 6.55705C12.7 6.48803 12.7069 6.4182 12.7279 6.35202C12.7488 6.28583 12.7833 6.22472 12.8292 6.1726C12.875 6.12051 12.9312 6.07853 12.9941 6.04933C14.9781 5.13313 17.182 4.80118 19.3478 5.09236C21.5139 5.38357 23.5521 6.28596 25.2237 7.69384C26.8953 9.10171 28.1312 10.9568 28.7864 13.0417C29.4417 15.1267 29.4893 17.3552 28.9237 19.4662C28.358 21.5773 27.2026 23.4834 25.5926 24.9614C23.9826 26.4394 21.9848 27.428 19.8332 27.8114C17.6816 28.1949 15.4653 27.9573 13.4438 27.1265C11.4225 26.2957 9.67975 24.9062 8.41967 23.1206C8.37984 23.0639 8.35224 22.9996 8.33861 22.9316C8.32495 22.8635 8.32562 22.7934 8.34058 22.7256C8.35553 22.6578 8.38444 22.5938 8.42546 22.5378C8.46648 22.4818 8.51872 22.435 8.57884 22.4002L18.0659 16.9229L18.4989 16.6729L18.2489 16.2399L12.7715 6.75289C12.7368 6.69276 12.715 6.62607 12.7075 6.55705ZM16.1307 26.8551C18.5198 27.2431 20.9695 26.7939 23.0654 25.5834C25.3218 24.2837 27.0147 22.192 27.8156 19.7143C28.6165 17.2367 28.4681 14.5498 27.3994 12.1753C26.3307 9.80086 24.4178 7.9082 22.0321 6.86477C19.6464 5.82134 16.9581 5.70158 14.4891 6.52876L13.909 6.72308L14.2149 7.25286L19.6149 16.6059C19.7528 16.8448 19.6708 17.151 19.4319 17.2889L10.0788 22.6889L9.54848 22.9951L9.95455 23.4535C11.5596 25.2654 13.7414 26.467 16.1307 26.8551Z" fill="black" stroke="#001F3F"/>
                                            </g>
                                            <defs>
                                                <clipPath id="clip0_3741_78301">
                                                    <rect width="32" height="32" fill="white"/>
                                                </clipPath>
                                            </defs>
                                        </svg>


                                        <span>{{ part_payment }}</span>
                                    </a>

                                </div>
                            </div>
                        </div>


                        <script>
                            function open_popup(popup = ''){
                                masked("body", !0),
                                    $(".modal-backdrop").remove(),
                                    $.ajax({
                                        type: "post",
                                        url: "index.php?route=octemplates/module/oct_popup_info/"+popup,
                                        cache: !1,
                                        success: function(e) {
                                            console.log(e)
                                            masked("body", !1),
                                                $(".modal-holder").html(e),
                                                $("#infoModal").modal("show"),
                                                popupClose()
                                        }
                                    })
                            }
                            /*
                                                        var swiper = new Swiper('.swiper-container-squares', {
                                                            slidesPerView: 4,
                                                            spaceBetween: 15,
                                                            loop: true,
                                                            navigation: {
                                                                nextEl: ".swiper-container-squares-arrows .swiper-button-next",
                                                                prevEl: ".swiper-container-squares-arrows .swiper-button-prev",
                                                            },
                                                            autoplay: {
                                                                delay: 3500,
                                                                disableOnInteraction: true,
                                                                pauseOnMouseEnter: true,
                                                            },
                                                            breakpoints: {
                                                                1400: {
                                                                    slidesPerView: 3,
                                                                },
                                                                601: {
                                                                    slidesPerView: 2,
                                                                },
                                                                450: {
                                                                    slidesPerView: 2,
                                                                },
                                                            }
                                                        });*/
                        </script>

                    </div>

                    {% if bundles %}

                        <div class="bw-p-15">
                            <div class="bundle_wrapper bundles_count-{{ bundles_count }} br-12">
                                <div class="bundle_items">
                                    {% for bundle in bundles %}
                                        <div class="bundle_item">
                                            <div class="bundles_header">
                                                {% if  bundle.full_price != bundle.end_price%}
                                                    <div class="bundles_header_title">{{ toogether_cheaper }}</div>
                                                {% else %}
                                                    <div class="bundles_header_title">{{ toogether_convenient }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="bundle_info">
                                                {% if bundle.products %}
                                                    <div class="bundle_products bundle_products-{{ bundle.count}} ">
                                                        {% for bundle_product in bundle.products %}
                                                            <div class="bundle_product">
                                                                <a href="{{ bundle_product.link }}" class="bundle_product_img">
                                                                    <img src="/image/{{ bundle_product.image }}" alt="" class="aspect-r-3-4">
                                                                </a>
                                                                <div class="bundle_product_detail">
                                                                    <a href="{{ bundle_product.link }}" class="bundle_product_name">{{ bundle_product.name }}</a>

                                                                    {#{{ bundle_product.product_id }} #}
                                                                    {#{{ bundle_product.manufacturer }} <br>#}
                                                                    {#{{ bundle_product.quantity }} <br>#}
                                                                    {#{{ bundle_product.stock_status_id }} <br>#}
                                                                    {#{{ bundle_product.status }} <br>#}
                                                                    <div class="bundle_product_pricees">
                                                                        <div class="bundle_product_price">
                                                                            {{ bundle_product.price }}
                                                                        </div>

                                                                        <div class="bundle_product_usdt_price">
                                                                            {{ bundle_product.usdt_price }} usdt
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                {#                                                    {{ bundle_product.special }}#}
                                                            </div>
                                                        {% endfor %} {# product in bundle.products #}
                                                    </div>
                                                {% endif %} {# bundle.products #}
                                                <div class="bundle_footer">
                                                    <div class="bundle_footer_info">
                                                        {% if  bundle.full_price != bundle.end_price%}
                                                            <div class="bundle_footer_prices">
                                                                <div class="bundle_footer_full_price">{{ bundle.full_price }}</div>
                                                                <div class="bundle_footer_comp_price">  {{ bundle.end_price }}</div>
                                                            </div>
                                                        {% else %}
                                                            <div class="bundle_footer_prices price-bottom">
                                                                <div class="bundle_footer_comp_price">  {{ bundle.full_price }}</div>
                                                            </div>
                                                        {% endif %}

                                                        <div class="bundle_footer_usdt_price">
                                                            {{ bundle.end_price_usdt }} usdt
                                                        </div>
                                                    </div>

                                                    <div class="bundle_footer_buy_btn" data-link="{{ bundle.add_to_cart_link }}">
                                                        Купити комплект
                                                    </div>
                                                </div>




                                            </div>
                                        </div>
                                    {% endfor %} {# bundle in bundles #}
                                </div>
                            </div>
                        </div>
                        <script>
                            $('.bundle_items').slick({
                                infinite: true,
                                dots: true,
                                centerPadding: '30px',
                                slidesToShow: 1,
                                adaptiveHeight: true,
                                responsive: [
                                    {
                                        breakpoint: 576,
                                        settings: {
                                            arrows: false,
                                            centerMode: true,
                                            centerPadding: '15px',
                                        }
                                    }
                                ]
                            })
                        </script>

                        <script>
                            $(document).on('click', '.bundle_footer_buy_btn', function() {
                                const btn = $(this)
                                const link = $(this).data('link');

                                if (link) {
                                    $.ajax({
                                        url: link,
                                        method: 'GET',
                                        success: function(response) {
                                            try {
                                                const parsedResponse = JSON.parse(response);
                                                if (parsedResponse.success) {
                                                    $(btn).text('Додано');
                                                    $(btn).addClass('success_ajax');
                                                    octPopupCart();
                                                } else {
                                                    console.error('Запит виконано, але відповідь неуспішна');
                                                }
                                            } catch (e) {
                                                console.error('Помилка при парсингу відповіді:', e);
                                            }
                                        },
                                        error: function(xhr, status, error) {
                                            console.error('Помилка AJAX:', error);
                                        }
                                    });
                                } else {
                                    console.error('Посилання не знайдено!');
                                }
                            });
                        </script>


                    {% else %}

                    {% if review_status %}
                        <div class="content-block mobile-visible">
                            <div class="d-flex align-items-center">
                                <div class="sc-module-rating-stars d-flex align-items-center">
                                    {% for i in 1..5 %}
                                        {% if rating < i %}
                                            <span class="sc-module-rating-star"></span>
                                        {% else %}
                                            <span class="sc-module-rating-star sc-module-rating-star-is"></span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                                <span class="sc-product-info-item-badge dark-text">{{ total_reviews }} {{ oct_product_reviews }}</span>
                            </div>
                        </div>
                    {% endif %}

                    {% if main_attributes|length > 0 %}
                        <div class="sc-product-attr d-md-block">
                            <div class="sc-product-attr-title p-3">
                                <span class="fsz-14 dark-text fw-600">{{ oct_product_attributes }}</span>
                                <span class="blue-link fsz-12" id="attr-quick-view" onclick="scrollToElement('.sc-product-content-attributes', '.sc-product-tab-attributes', -140);">{{ oct_product_attributes_seeall }}</span>
                            </div>
                            <div class="sc-product-attr-list fsz-14">
                                <div class="sc-product-attr-list-item d-flex mobile-visible">
                                    <div class="dark-text fw-500 fsz-14">Артикул (SKU</div>
                                    <div>{{ model }}</div>
                                </div>

                                <div class="sc-product-attr-list-item d-flex mobile-visible">
                                    <div class="dark-text fw-500 fsz-14">{{ text_manufacturer }}</div>
                                    <div>{{ manufacturer }}</div>
                                </div>

                                {% for attribute in main_attributes %}
                                    <div class="sc-product-attr-list-item d-flex">
                                        <div class="dark-text fw-500 fsz-14">{{ attribute.name }}</div>
                                        <div>{{ attribute.text|replace({", ": "<br>"}) }}</div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                    {% endif %}
                </div>

            </div>


            <div class="sc-product-content col-12 mt-4">
                <div class="row g-0">
                    <div class="col-md-12">
                        {% if description %}
                            <div class="sc-product-content-description pb-4 mb-md-4 px-3 px-lg-4">
                                {# <div class="sc-product-content-title d-flex align-items-center">
                                    <div class="sc-product-content-title-icon d-flex align-items-center justify-content-center br-4">
                                        <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-content-description-icon" alt="" width="16" height="16">
                                    </div>
                                    <span class="tab-title fw-500 km-text-dark">{{ oct_product_description }}</span>
                                </div>#}
                                <div class="sc-product-content-text dark-text fsz-14 mt-3" style="border-top: 2px solid #001F3F1A; padding-top: 3rem;">
                                    {{ description }}
                                    {% if tags %}
                                        <p class="sc-product-tags">{{ text_tags }}
                                            {% for i in 0..tags | length - 1 %}
                                                <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>{% if i < (tags|length - 1) %},{% endif %}
                                            {% endfor %}
                                        </p>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>

                    <div class="col-lg-8 col-xl-9 sc-product-content-left py-3 py-lg-4 order-1 order-lg-0">

                        {% if attribute_groups %}
                            <div class="sc-product-content-attributes pb-4 mb-md-4 pt-4 pt-md-0 px-3 px-lg-4">
                                <div class="sc-product-content-title d-flex align-items-center mb-35">
                                    <span class="tab-title fw-500 km-text-dark">{{ oct_product_attributes_tab }}</span>
                                </div>
                                <div class="dark-text fsz-14">
                                    <div class="sc-product-content-attributes-list">
                                        {% for attribute_group in attribute_groups %}
                                            {#                                                <div class="sc-product-content-attributes-list-title">{{ attribute_group.name }}</div>#}
                                            {% for attribute in attribute_group.attribute %}
                                                <div class="sc-product-content-attributes-list-item d-flex justify-content-between">
                                                    <div>{{ attribute.name }}</div>
                                                    <div>
                                                        {% if attribute.need_wrapper == 1 %}
                                                        <div class="attribute-wrapper attribute-wrapper-collapsed">
                                                            {% endif %}

                                                            {{ attribute.text|replace({", ": "<br>"}) }}

                                                            {% if attribute.need_wrapper == 1 %}

                                                        </div>
                                                        <div class="attribute-wrapper">
                                                            <div class="more-btn">{{ show_more_text }} <i class="fas fa-chevron-down fsz-12"></i></div>
                                                        </div>

                                                        <script>
                                                            $('.more-btn').click(function(){
                                                                $('.attribute-wrapper').removeClass('attribute-wrapper-collapsed');
                                                                $('.more-btn').remove();
                                                            });
                                                        </script>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endif %}




                        <div class="pb-4 mb-md-4 pt-4 pt-md-0 px-3 px-lg-4" id="review-question-wrapper">
                            <div class="product-reviews-ask-title">
                                {{ reviews_and_question }}
                            </div>

                            <div class="product-reviews-ask-wrapper">
                                <div class="product-reviews-ask-buttons">
                                    <div class="product-reviews-ask-button active" data-target="reviews">
                                        {{ reviews_multi }}
                                        {% if total_reviews > 0 %}
                                            <span>{{ total_reviews }}</span>
                                        {% endif %}
                                    </div>
                                    <div class="product-reviews-ask-button" data-target="asks">{{ single_question}} </div>
                                </div>
                            </div>

                            <div class="product-reviews-ask-body">
                                <div class="product-reviews-ask-item product-reviews-wrapper active">
                                    {% if review_status %}

                                        <div class="sc-product-product-review-title">
                                           {{ customer_reviews_about }} {{ heading_title }}
                                        </div>

                                        <div class="reviews-summary">
                                            <div class="sc-module-rating-stars d-flex align-items-center">
                                                {% for i in 1..5 %}
                                                    {% if rating < i %}
                                                        <span class="sc-module-rating-star"></span>
                                                    {% else %}
                                                        <span class="sc-module-rating-star sc-module-rating-star-is"></span>
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                            <span class="sc-product-info-item-badge ">{{ total_reviews }} {{ oct_product_reviews }}</span>
                                        </div>

                                        <div class="sc-product-leave-review">
                                            <div class="sc-product-leave-review-text">
                                                {{ leave_review }}
                                            </div>
                                            {% if logged %}
                                                <button type="button" class="add-review-button br-8"  data-bs-toggle="modal" data-bs-target="#reviewModal">{{ tab_review_add }}</button>
                                            {% else %}
                                                <button type="button" class="add-review-button br-8" onclick="octPopupLogin();">{{ tab_review_add }}</button>
                                            {% endif %}
                                        </div>



                                        <div class="sc-product-content-reviews pb-4 mb-md-4 pt-4 pt-md-0">


                                            {% if review_guest %}
                                                <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-centered">
                                                        <div class="modal-content">
                                                            {#                                    <div class="modal-header p-4">#}
                                                            {#                                        <h5 class="modal-title fsz-20 d-flex align-items-center justify-content-between" id="reviewModalLabel">{{ text_write }}</h5>#}
                                                            {#                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>#}
                                                            {#                                    </div>#}
                                                            <div class="modal-body modal-body-review">

                                                                <form id="popup_review_form">

                                                                    <div class="popup_review-head">

                                                                        <div class="modal-body-product-img">
                                                                            <img class="aspect-r-3-4" src="{{ thumb }}" alt="{{ heading_title }}">
                                                                        </div>
                                                                        <div class="modal-body-product-title-wrapper">
                                                                            <div class="modal-body-product-title">
                                                                                Мій відгук про:<br>
                                                                                {{ heading_title }}
                                                                            </div>
                                                                            <div class="modal-body-product-sub-title">
                                                                                Розкажіть про свій досвід користування
                                                                            </div>
                                                                        </div>


                                                                    </div>
                                                                    <div class="popup_review-body">
                                                                        <div class="modal-body-product-info  dark-text d-flex flex-column justify-content-between">
                                                                            <div class="sc-module-rating-box d-flex align-items-center">
                                                                                <span class="review-form-label">Оцініть товар</span>
                                                                                <div class="sc-module-rating d-flex align-items-center br-4">
                                                                                    <div class="sc-module-rating-stars d-flex align-items-center">
                                                                                        <label class="sc-module-rating-star sc-module-rating-star-is"><input class="d-none" type="radio" name="rating" value="1" checked/></label>
                                                                                        <label class="sc-module-rating-star sc-module-rating-star-is"><input class="d-none" type="radio" name="rating" value="2" checked/></label>
                                                                                        <label class="sc-module-rating-star sc-module-rating-star-is"><input class="d-none" type="radio" name="rating" value="3" checked/></label>
                                                                                        <label class="sc-module-rating-star sc-module-rating-star-is"><input class="d-none" type="radio" name="rating" value="4" checked/></label>
                                                                                        <label class="sc-module-rating-star sc-module-rating-star-is"><input class="d-none" type="radio" name="rating" value="5" checked/></label>
                                                                                    </div>
                                                                                </div>
                                                                                <script>
                                                                                    window.addEventListener('DOMContentLoaded', () => {
                                                                                        reviewsRating('#popup_review_form');
                                                                                    });
                                                                                </script>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group pb-3">
                                                                        <label for="inputReviewName" class="review-form-label">Імʼя та Прізвище</label>
                                                                        <input type="text" name="name" class="form-control br-8" id="inputReviewName" inputmode="text" value="{{ user.lastname }} {{ user.firstname }}">
                                                                    </div>
                                                                    <div class="form-group pb-3">
                                                                        <label for="inputReviewComment" class="review-form-label">Коментар</label>
                                                                        <textarea id="inputReviewComment" name="text" class="form-control br-8" ></textarea>
                                                                    </div>
                                                                    <div class="modal-review-video-wrapper">
                                                                        <div class="modal-review-video-wrapper-head">

                                                                            <svg width="30" height="21" viewBox="0 0 30 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                                <path d="M12 15L19.785 10.5L12 6V15ZM29.34 3.255C29.535 3.96 29.67 4.905 29.76 6.105C29.865 7.305 29.91 8.34 29.91 9.24L30 10.5C30 13.785 29.76 16.2 29.34 17.745C28.965 19.095 28.095 19.965 26.745 20.34C26.04 20.535 24.75 20.67 22.77 20.76C20.82 20.865 19.035 20.91 17.385 20.91L15 21C8.715 21 4.8 20.76 3.255 20.34C1.905 19.965 1.035 19.095 0.66 17.745C0.465 17.04 0.33 16.095 0.24 14.895C0.135 13.695 0.0899999 12.66 0.0899999 11.76L0 10.5C0 7.215 0.24 4.8 0.66 3.255C1.035 1.905 1.905 1.035 3.255 0.66C3.96 0.465 5.25 0.33 7.23 0.24C9.18 0.135 10.965 0.0899999 12.615 0.0899999L15 0C21.285 0 25.2 0.24 26.745 0.66C28.095 1.035 28.965 1.905 29.34 3.255Z" fill="#808f9f"/>
                                                                            </svg>
                                                                            Додайте відео
                                                                        </div>
                                                                        <div class="form-group">
                                                                            <label for="inputReviewName" class="review-form-label">Посилання на відео з Youtube</label>
                                                                            <input type="text" name="review_video" class="form-control" id="review_video" placeholder="https://">
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group pb-3 ">
                                                                        <label for="inputReviewName" class="fsz-14 dark-text fw-500 pb-1">{{ text_photo }}</label>
                                                                        <div class="form-image-download">
                                                                            <label class="form__container" id="upload-container">
                                                                                <div class="review-upload-info">
                                                                                    <div class="review-upload-info-img">
                                                                                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"> <g opacity="0.5"> <path fill-rule="evenodd" clip-rule="evenodd" d="M4.22932 4.22961C2.66666 5.79094 2.66666 8.30561 2.66666 13.3336V18.6669C2.66666 23.6949 2.66666 26.2096 4.22932 27.7709C5.79199 29.3323 8.30532 29.3336 13.3333 29.3336H18.6667C23.6947 29.3336 26.2093 29.3336 27.7707 27.7709C29.332 26.2083 29.3333 23.6949 29.3333 18.6669V13.3336C29.3333 9.54694 29.3333 7.18694 28.6667 5.58561V22.6669C28.0328 22.667 27.4051 22.5423 26.8194 22.2998C26.2338 22.0573 25.7016 21.7018 25.2533 21.2536L24.2507 20.2509C23.288 19.2883 22.808 18.8083 22.2627 18.6056C21.6631 18.3827 21.0035 18.3827 20.404 18.6056C19.8587 18.8083 19.3773 19.2883 18.4173 20.2509L18.2653 20.4016C17.4853 21.1816 17.0947 21.5723 16.68 21.6443C16.3579 21.701 16.0262 21.6374 15.748 21.4656C15.3907 21.2443 15.1733 20.7363 14.7373 19.7216L14.6667 19.5563C13.6667 17.2229 13.168 16.0576 12.296 15.6203C11.8569 15.4001 11.3655 15.3055 10.876 15.3469C9.90399 15.4296 9.00799 16.3269 7.21332 18.1203L4.66666 20.6669V3.84961C4.51199 3.96428 4.36621 4.09094 4.22932 4.22961Z" fill="#001F3F"/> <path d="M4 13.3333C4 10.7813 4.00267 9.00133 4.184 7.65867C4.35867 6.35467 4.68 5.664 5.17067 5.172C5.664 4.67867 6.35467 4.35867 7.65867 4.184C9.00133 4.00267 10.7813 4 13.3333 4H18.6667C21.2187 4 22.9987 4.00267 24.3413 4.184C25.6453 4.35867 26.336 4.68 26.828 5.17067C27.3213 5.664 27.6413 6.35467 27.8173 7.65867C27.9973 9.00133 28 10.7813 28 13.3333V18.6667C28 21.2187 27.9973 22.9987 27.8173 24.3413C27.6413 25.6453 27.32 26.336 26.828 26.828C26.336 27.3213 25.6453 27.6413 24.3413 27.8173C22.9987 27.9973 21.2187 28 18.6667 28H13.3333C10.7813 28 9.00133 27.9973 7.65867 27.8173C6.35467 27.6413 5.664 27.32 5.172 26.828C4.67867 26.336 4.35867 25.6453 4.184 24.3413C4.00267 22.9987 4 21.2187 4 18.6667V13.3333Z" stroke="#001F3F" stroke-width="2"/> <path d="M20 14.6673C21.4727 14.6673 22.6666 13.4734 22.6666 12.0007C22.6666 10.5279 21.4727 9.33398 20 9.33398C18.5272 9.33398 17.3333 10.5279 17.3333 12.0007C17.3333 13.4734 18.5272 14.6673 20 14.6673Z" fill="#001F3F"/> </g> </svg>
                                                                                    </div>
                                                                                    <div class="review-upload-info-text">
                                                                                        <div class="review-upload-info-title">
                                                                                            Додайте фото
                                                                                        </div>
                                                                                        <div class="review-upload-info-text">
                                                                                            Перетягніть файли сюди чи натисніть на кнопку.  <br>
                                                                                            Додавайте до 10 зображень у форматі .jpg, .gif, .png, <br>
                                                                                            розміром файлу до 5 МБ
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="review-upload">Вибрати файл</div>

                                                                                <input class="form__file" id="upload-files" type="file" accept="image/*" multiple>
                                                                            </label>
                                                                        </div>
                                                                        <div id="files-list-container" class="form__files-container"></div>
                                                                    </div>

                                                                    {#
                                                                    <div class="sc-modal-comment fsz-12">{{ text_note }}</div>
                                                                    #}

                                                                    <div class="form-group pb-3">
                                                                        {{ captcha }}
                                                                    </div>

                                                                    <div class="d-flex gg-15 modal-review-footer">
                                                                        <div id="close-review-form" class="h-48 fw-500" data-bs-dismiss="modal" aria-label="Close">
                                                                            Скасувати
                                                                        </div>
                                                                        <button type="button" id="button-review" class="h-48 sc-btn-primary br-2 br-12">{{ button_continue }}</button>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                            <div id="review" class="dark-text fsz-14 mt-4">
                                                {% if oct_reviews_list is not empty %}
                                                    {{ oct_reviews_list }}
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>

                                <div class="product-reviews-ask-item product-asks-wrapper">
                                    {% if oct_product_faq is defined and oct_product_faq %}
                                        {{ oct_product_faq }}
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <script>
                            $(document).on('click', '.product-reviews-ask-button:not(.active)', function(e){
                                let button = $(e.target);
                                let target = button.attr('data-target');
                                $('.product-reviews-ask-button.active').removeClass('active');
                                button.addClass('active');


                                $('.product-reviews-ask-item').removeClass('active');
                                $('.product-'+target+'-wrapper').addClass('active');
                                console.log( $('.product-'+target+'-wrapper'))


                            });

                        </script>




                        {% if (dop_tab.title is defined and dop_tab.title) and (dop_tab.text is defined and dop_tab.text) %}
                            <div id="product_dop_tab" class="sc-product-content-info pt-4 pt-md-0 px-3 px-lg-4">
                                <div class="sc-product-content-title d-flex align-items-center">
                                    <div class="sc-product-content-title-icon d-flex align-items-center justify-content-center br-4">
                                        <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-content-info-icon" alt="" width="16" height="16">
                                    </div>
                                    <span class="tab-title fw-500 km-text-dark">{{ dop_tab.title }}</span>
                                </div>
                                <div class="sc-product-content-text dark-text fsz-14 mt-3">{{ dop_tab.text }}</div>
                            </div>
                        {% endif %}
                        {% if oct_product_extra_tabs %}
                            {% set key = 0 %}
                            {% for extra_tab in oct_product_extra_tabs %}
                                {% set key = key + 1 %}
                                <div id="product_extra_tab-{{ key }}" class="sc-product-content-info pt-4 pt-md-0 px-3 px-lg-4">
                                    <div class="sc-product-content-title d-flex align-items-center">
                                        <div class="sc-product-content-title-icon d-flex align-items-center justify-content-center br-4">
                                            <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--product-content-info-icon" alt="" width="16" height="16">
                                        </div>
                                        <span class="tab-title fw-500 km-text-dark">{{ extra_tab.title }}</span>
                                    </div>
                                    <div class="sc-product-content-text dark-text fsz-14 mt-3">{{ extra_tab.text }}</div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="col-lg-4 col-xl-3 sc-product-content-right p-3 px-md-0 p-lg-4 order-0 order-lg-1">
                        {% if (oct_showcase_data.product_advantage is defined and oct_showcase_data.product_advantage == 'on') and (oct_product_advantages is defined and oct_product_advantages is not empty) %}
                            <div class="sc-product-content-advantages d-flex flex-column flex-md-row flex-lg-column pb-lg-3 g-3">
                                {% for advantage in oct_product_advantages %}
                                    <div class="sc-product-content-advantages-item">
                                        <div class="d-flex align-items-center">
                                            <img src="{{ advantage.icone }}" alt="" width="32" height="32" />
                                            <a href="{{ advantage.link }}" {% if advantage.information_id and advantage.popup %} data-rel="{{ advantage.information_id }}" {% elseif advantage.link != "javascript:;" %} target="_blank" {% endif %} class="sc-product-content-advantages-item-title text-uppercase fsz-14 fw-600{% if advantage.popup %} agree{% endif %}">{{ advantage.title }}</a>
                                        </div>
                                        <div class="sc-product-content-advantages-item-text fsz-12 mt-2">
                                            {{ advantage.text }}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <div class="sc-product-content-card sc-module-item sticky-top d-none d-lg-block ">
                            <div class="content-block d-flex flex-column scrolling-product">
                                <div class="sc-module-img position-relative">
                                    {% if thumb %}
                                        <img class="img-fluid aspect-r-3-4" src="{{ thumb }}" alt="" >
                                    {% endif %}
                                    <div class="sc-module-btns d-flex flex-column position-absolute">
                                        <button type="button" class="sc-btn sc-btn-outline sc-btn-outline-secondary sc-btn-with-icon br-4 sc-wishlist-btn" onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}" aria-label="Wishlist button">
                                            <span class="sc-btn-icon sc-btn-icon-wishlist"></span>
                                        </button>
                                        <button type="button" class="sc-btn sc-btn-outline sc-btn-outline-secondary sc-btn-with-icon br-4 sc-compare-btn" onclick="compare.add('{{ product_id }}');" title="{{ button_compare }}" aria-label="Compare button">
                                            <span class="sc-btn-icon sc-btn-icon-compare"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="sc-module-caption d-flex flex-column justify-content-between py-md-2 h-100">
                                    <div class="scrolling-product-title">{{ heading_title }}</div>
                                    <div class="scrolling-product-model">{{ product_code }}: {{ model }}</div>

                                    {% if price %}
                                        <div class="sc-module-price-box pt-2 mt-auto">
                                            <div class="price-col">
                                                {% if not special %}
                                                    <div class="sc-module-price fw-500">{{ price }}</div>
                                                {% else %}
                                                    <div class="sc-module-price-old">{{ price }}</div>
                                                    <div class="sc-module-price sc-module-price-sale fw-500">{{ special }}</div>
                                                {% endif %}
                                            </div>
                                            <div class="usdnt-price-grid">{{ usdt_price }} usdt</div>
                                        </div>

                                    {% endif %}

                                </div>
                                 {% if can_buy %}
                                    <div class="sc-module-cart d-flex align-items-stretch justify-content-between">
                                        {# <div class="sc-module-quantity d-flex align-items-center justify-content-center py-1 br-12 ">
                                            <button type="button" aria-label="Minus" class="sc-module-quantity-btn d-flex align-items-center justify-content-center sc-minus">
                                                <span class="minus"></span>
                                            </button>
                                            <input type="text" class="form-control" name="quantity" value="1" aria-label="Quantity" inputmode="numeric">
                                            <button type="button" aria-label="Plus" class="sc-module-quantity-btn d-flex align-items-center justify-content-center sc-plus">
                                                <span class="plus"></span>
                                            </button>
                                            <input type="hidden" name="product_id" value="{{ product_id }}">
                                        </div> #}

                                        <button type="button" class="sc-btn sc-btn-primary sc-btn-with-icon br-4 sc-product-fixed-cart-btn fixed-btn" aria-label="To cart">
                                            {# <img src="catalog/view/theme/oct_showcase/img/sprite.svg#include--btn-cart-icon" alt="" width="20" height="20" class="sc-btn-icon sc-btn-icon-cart-img"> #}
                                            <span class="sc-btn-text">{{ cart_text2 }}</span>
                                        </button>

                                    </div>
                                 {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    {% if products %}
        {#        {{ products }}#}
    {% endif %}
    {% if oct_related_articles %}
        <div id="sc-related-article" class="row mt-3 mt-md-0 p-3 p-md-0 pt-xl-3 g-3 g-xl-4 sc-module">
            <div class="sc-module-header fsz-22 dark-text fw-700 text-center text-md-start mt-0 mt-md-2 mb-2">{{ oct_product_related_articles }}</div>
            {% for article in oct_related_articles %}
                <div class="sc-last-news-item">
                    <div class="content-block h-100 d-flex flex-column p-0 pb-3 overflow-hidden">
                        <a href="{{ article.href }}" title="{{ article.name }}">
                            <img src="{{ article.thumb }}"{% if oct_lazyload is defined and oct_lazyload %} data-srcset="{{ article.thumb }} 100w" srcset="{{ oct_lazy_image }} 100w" sizes="100vw" class="img-fluid oct-lazy"{% else %} class="img-fluid w-md-100"{% endif %} alt="{{ article.name }}" width="{{ article.width }}" height="{{ article.height }}" />
                        </a>
                        <div class="sc-last-news-caption d-flex flex-column justify-content-between w-100">
                            <div class="sc-last-news-info d-flex align-items-center justify-content-between p-3">
                                <div class="d-flex align-items-center">
                                    {% for blog_category_name in article.blog_categories %}
                                        <span class="sc-module-sticker br-4 fsz-10 fw-500 sc-module-sticker-green me-1">{{ blog_category_name }}</span>
                                    {% endfor %}
                                </div>
                                <span class="sc-last-news-item-date fsz-12">{{ article.date_added }}</span>
                            </div>
                            <a href="{{ article.href }}" class="sc-last-news-title fw-700 fsz-14 dark-text px-3">{{ article.name }}</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {{ content_bottom }}
</div>

<div id="comptest" style="display:none"></div>

<script>
    $('.review-image-item-link').on('click', function(e) {
        e.preventDefault();

        var trueIndex = $(this).attr('data-position')

        $.fancybox.open(
            $(this).closest('.review-images-wrapper').find('.review-image-item-link'),
            {
                backFocus: false,
                hideScrollbar: false,
                loop : true
            },
            trueIndex
        );

        return false;
    });
</script>

{% if oct_product_main_image_option_status is defined and oct_product_main_image_option_status %}
    <script>
        $(document).on('change', '#sc-product-options .radio', function() {

            $.ajax({
                url: 'index.php?route=product/product/getPImages&product_id={{ product_id }}',
                type: 'post',
                data: $('#sc-product-options input[type=\'radio\']:checked'),
                dataType: 'json',
                success: function(json) {

                    if (json['images']) {
                        $('.sc-product-images-additional, .sc-product-images-main').slick('slickRemove', null, null, true);
                        $.fancybox.destroy();

                        const obj = JSON.parse(JSON.stringify(json['images']));

                        Object.keys(obj).forEach(el => {
                            const popupImage = obj[el].popup,
                                thumbImage = obj[el].thumb,
                                sliderImage = obj[el].thumb_slider,
                                width = obj[el].width,
                                height = obj[el].height,
                                thumbHeight = obj[el].thumb_height,
                                thumbWidth = obj[el].thumb_width;

                            $('.sc-product-images-additional').slick('slickAdd',`
                        <div class="image-additional-item">
                            <a class="sc-product-images-additional-item" href="${thumbImage}" onClick="return false;" data-href="${thumbImage}">
                                <img src="${thumbImage}" width="${thumbWidth}" height="${thumbHeight}" />
                            </a>
                        </div>`);

                            $('.sc-product-images-main').slick('slickAdd',`
                        <div class="sc-product-images-slide sc-product-images-slide-opt pb-3 pb-md-4">
                            <a href="${popupImage}" class="oct-gallery d-block" onClick="return false;">
                                <img src="${sliderImage}" width="${width}" height="${height}" class="d-block mx-auto" />
                            </a>
                        </div>`);
                        });

                        {% if oct_showcase_data.product_zoom is defined and oct_showcase_data.product_zoom %}
                        $(".oct-gallery").zoom();
                        {% endif %}

                        let sliderProductsOpt = $('.sc-product-images-slide-opt:not(.slick-cloned) a');

                        $('.sc-product-images-slide a').on('click', function(e) {
                            e.preventDefault();

                            var totalSlides = $(this).parents('.sc-product-images-main').slick("getSlick").slideCount,
                                dataIndex = $(this).parents('.sc-product-images-slide').data('slick-index'),
                                trueIndex;

                            switch(true) {
                                case (dataIndex < 0):
                                    trueIndex = totalSlides+dataIndex;

                                    break;
                                case (dataIndex >= totalSlides):
                                    trueIndex = dataIndex%totalSlides;

                                    break;
                                default:
                                    trueIndex = dataIndex;
                            }

                            $.fancybox.open(sliderProductsOpt, {backFocus: false, hideScrollbar: false}, trueIndex);

                            return false;
                        });
                    }
                }
            });
        });
    </script>
{% endif %}
<script>
    $('select[name=\'recurring_id\'], input[name="quantity"]').change(function() {
        $.ajax({
            url: 'index.php?route=product/product/getRecurringDescription',
            type: 'post',
            data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
            dataType: 'json',
            cache: false,
            beforeSend: function() {
                $('#recurring-description').html('');
            },
            success: function(json) {
                $('.alert-dismissible, .text-danger').remove();

                if (json['success']) {
                    $('#recurring-description').html(json['success']);
                }
            }
        });
    });
</script>
<script>
    function ajaxAfterButtonCartClick(clickedElement = $('#button-cart')) {
        let data;

        if ($(clickedElement).hasClass('sc-product-fixed-cart-btn')) {
            data = $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea, #product input[type=\'date\'], #product input[type=\'datetime-local\'], #product input[type=\'time\']');
            // ця лінійка нижче була раніше і вона не працювала (додавання товару в кошик на телефоні)
            // data = $('.sc-product-content-card input[type=\'text\'], .sc-product-content-card input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea, #product input[type=\'date\'], #product input[type=\'datetime-local\'], #product input[type=\'time\']');
        } else {
            data = $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea, #product input[type=\'date\'], #product input[type=\'datetime-local\'], #product input[type=\'time\']');
        }
        $.ajax({
            url: 'index.php?route=checkout/cart/add',
            type: 'post',
            data: data,
            dataType: 'json',
            cache: false,
            beforeSend: function() {
                $('#button-cart').button('loading');
            },
            complete: function() {
                $('#button-cart').button('reset');
            },
            success: function(json) {
                $('.alert-dismissible, .text-danger').remove();
                $('.form-group').removeClass('has-error');

                if (json['error']) {
                    if (json['error']['option']) {
                        let errorOption = '';
                        for (i in json['error']['option']) {
                            var element = $('#input-option' + i.replace('_', '-'));

                            if (element.parent().hasClass('input-group')) {
                                element.parent().after('<div class="text-danger fsz-14 fw-500 mb-4">' + json['error']['option'][i] + '</div>');
                            } else {
                                element.parent().after('<div class="text-danger fsz-14 fw-500 mb-4">' + json['error']['option'][i] + '</div>');
                            }
                            errorOption += '<div class="alert-text-item">' + json['error']['option'][i] + '</div>';
                        }
                        scNotify('danger', errorOption);

                        scrollToElement('.sc-product-actions-middle', false, -110);
                        return;
                    }

                    if (json['error']['error_warning']) {
                        scNotify('danger', json['error']['error_warning']);
                    }

                    if (json['error']['recurring']) {
                        $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
                    }

                    // Highlight any found errors
                    $('.text-danger').parent().addClass('has-error');
                }

                if (json['success']) {
                    if (json['isPopup']) {
                        octPopupCart();
                    } else {
                        scNotify('success', json['success']);
                    }

                    let cartIdsHolder = document.querySelector("[data-cart-ids]");

                    if (json.oct_cart_ids && json.oct_cart_ids.length > 0 && cartIdsHolder) {
                        cartIdsHolder.dataset.cartIds = json.oct_cart_ids;
                        setCartBtnAdded();
                    }

                    // Need to set timeout otherwise it wont update the total
                    setTimeout(function() {
                        $('#cart .header-buttons-cart-quantity').html(json['total_products']);
                        $('.rm-header-cart-text').html(json['total_amount']);
                    }, 100);
                }
            },
            error: function(xhr, ajaxOptions, thrownError) {
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
        });
    }
</script>
<script>
    $('body').on('click', '#button-cart, .sc-product-fixed-cart-btn', function(){
        $('#button-cart').addClass('added_to_cart_in_product_page');
        
        fbq('track', 'AddToCart', {
            content_type: 'product',
            content_ids: ['{{ product_id }}'],
            value: {{ price_for_ads | number_format(2, '.', '') }},
            currency: 'UAH'
        });

        // Ця функція знаходиться вище
        ajaxAfterButtonCartClick(this);
    });
</script>
<script>
    $('button[id^=\'button-upload\']').on('click', function() {
        var node = this;

        $('#form-upload').remove();

        $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

        $('#form-upload input[name=\'file\']').trigger('click');

        if (typeof timer != 'undefined') {
            clearInterval(timer);
        }

        timer = setInterval(function() {
            if ($('#form-upload input[name=\'file\']').val() != '') {
                clearInterval(timer);

                $.ajax({
                    url: 'index.php?route=tool/upload',
                    type: 'post',
                    dataType: 'json',
                    data: new FormData($('#form-upload')[0]),
                    cache: false,
                    contentType: false,
                    processData: false,
                    beforeSend: function() {
                        $(node).button('loading');
                    },
                    complete: function() {
                        $(node).button('reset');
                    },
                    success: function(json) {
                        $('.text-danger').remove();

                        if (json['error']) {
                            $(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
                        }

                        if (json['success']) {
                            alert(json['success']);

                            $(node).parent().find('input').val(json['code']);
                        }
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            }
        }, 500);
    });
</script>
<script>
    $('#review').delegate('.pagination a', 'click', function(e) {
        e.preventDefault();
        $('#review').load(this.href);
        scrollToElement('.sc-product-content-reviews', false, -140);
    });

    $("#inputReviewName, #inputReviewComment").on("change paste keyup", function() {
        $(this).removeClass('error_style');
    });

    $('#button-review').on('click', function() {
        $.ajax({
            url: 'index.php?route=product/product/write&product_id={{ product_id }}',
            type: 'post',
            dataType: 'json',
            cache: false,
            data: $('#popup_review_form').serialize(),
            beforeSend: function() {
                $('#button-review').button('loading');
            },
            complete: function() {
                $('#button-review').button('reset');
            },
            success: function(json) {
                $('.alert-dismissible').remove();

                /**
                 * Завантажуємо зображення
                 */
                if(json.review_id && json['success']) {
                    let formData = new FormData();
                    let files = document.getElementById('upload-files').files;

                    for (let i = 0; i < files.length; i++) {
                        formData.append('review_photos[]', files[i]);
                    }

                    let xhr = new XMLHttpRequest();
                    xhr.open('POST', '/index.php?route=product/product/addphotostoreview&review_id=' + json.review_id, true);

                    xhr.onload = function () {
                        if (xhr.status === 200) {
                            console.log('Завантаження успішне');
                        } else {
                            console.error('Помилка завантаження');
                        }
                    };

                    xhr.send(formData);
                }


                if (json['error']) {
                    let errorOption = '';

                    console.log(json['error'])

                    $.each(json['error'], function(i, val) {
                        $('#reviewModal [name="' + i + '"]').addClass('error_style');
                        errorOption += '<div class="alert-text-item">' + val + '</div>';
                    });

                    scNotify('danger', errorOption);
                }

                if (json['success']) {
                    scNotify('success', json['success']);
                    $('#reviewModal').modal('hide');
                    $('#popup_review_form input[name=\'name\']').val('');
                    $('#popup_review_form input[name=\'review_video\']').val('');
                    $('#popup_review_form textarea[name=\'text\']').val('');
                    $('#upload-files').val('')
                    $('#files-list-container .form__image-container').remove()
                    $('#reviewModal .rm-module-rating-star-is').removeClass('rm-module-rating-star-is');
                }




















            }
        });
    });

    $('#input-quantity').on('change', function(e) {
        updateValueProduct(false, false, true);
    });

    function updateValueProduct(minus, plus, manual) {
        let min = parseInt($('#input-quantity').val());
        let currentMinimum = parseInt($('#min-product-quantity').val());
        let max = parseInt($('#max-product-quantity').val());

        if (max === 0)
            return;

        if (minus && min > 1) {

            if (currentMinimum >= min) {
                $("#input-quantity").val(currentMinimum);
                updateProductPrice();
                return;
            } else if (min > max) {
                $('#input-quantity').val(max);
                updateProductPrice();
                return;
            }

            $('#input-quantity').val(~~ $('#input-quantity').val() - 1);
        }

        if (plus) {
            if (max && min > max - 1) {
                $('#input-quantity').val(max);
                updateProductPrice();
                return;
            } else if (currentMinimum > min) {
                $('#input-quantity').val(currentMinimum);
                updateProductPrice();
                return;
            }

            $('#input-quantity').val(~~ $('#input-quantity').val() + 1);
        }

        if (manual) {
            if (currentMinimum >= min) {
                $('#input-quantity').val(currentMinimum);
                updateProductPrice();
                return;
            } else if (min > max) {
                $('#input-quantity').val(max);
                updateProductPrice();
                return;
            }

        }

        updateProductPrice();
    }

    $('#sc-product-options input, #sc-product-options select').on('change', function() {
        updateProductPrice();
    });

    {% if oct_showcase_data.product_zoom is defined and oct_showcase_data.product_zoom %}
    $(document).ready(function() {
        $(".oct-gallery").zoom();
    });
    {% endif %}

    function updateProductPrice() {
        $.ajax({
            type: 'post',
            url: 'index.php?route=octemplates/main/oct_functions/updatePrices',
            data: $('#product input[type=\'text\'], #product input[type=\'hidden\']:not("#oct_purchase_byoneclick_form_product input"), #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select'),
            dataType: 'json',
            cache: false,
            success: function(json) {
                {% if special %}
                $('#product .sc-module-price-old').html(json['price']);
                $('#product .sc-module-price').html(json['special']);
                {% else %}
                $('#product .sc-module-price').html(json['price']);
                {% endif %}

                {% if oct_sticker_you_save and you_save %}
                $('#main-product-you-save').html(json['you_save']);
                {% endif %}

                {#% if tax %}
                    $('.price-tax > span').html(json['tax']);
                {% endif %#}
            }
        });
    }
    {% if minimum > 1 %}
    updateProductPrice();
    {% endif %}
</script>
{% if oct_showcase_data.micro is defined and oct_showcase_data.micro %}
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Product",
            "url": "{{ share }}",
    "category": "{{ oct_product_categories }}",
    "image": "{{ thumb }}",
    "brand": {"@type": "Brand","name": "{{ manufacturer }}"},
    "manufacturer": "{{ manufacturer }}",
    "model": "{{ model }}",
    "productID": "{{ product_id }}",
        {% if upc is defined and upc%}
    "gtin12": "{{ upc }}",
    {% endif %}
    {% if ean is defined and ean %}
    "gtin": "{{ ean }}",
    {% endif %}
    {% if mpn is defined and mpn %}
    "mpn": "{{ mpn }}",
    {% endif %}
    {% if sku is defined and sku  %}
    "sku": "{{ sku }}",
    {% endif %}
    {% if rating %}
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "{{ rating }}",
        "ratingCount": "{{ total_reviews }}",
        "reviewCount": "{{ total_reviews }}",
        "bestRating": "5",
        "worstRating": "1"
    },
    {% endif %}

        "description": "{{ oct_description_microdata }}",
    "name": "{{ oct_micro_heading_title }}",

    "offers": {
        "@type": "Offer",
        "url": "{{ share }}",

        {% if oct_special_microdata %}
        {% set special_date = 'now'|date_modify("+30 day") %}
        "priceValidUntil" : "{{ special_date|date('Y-m-d') }}",
        {% else %}
        "priceValidUntil" : "{{ now|date_modify("+60 days") | date("Y-m-d") }}",
        {% endif %}

        {% if out_of_stock %}
        "availability": "https://schema.org/OutOfStock",
        {% else %}
        "availability": "https://schema.org/InStock",
        {% endif %}

        "price": "{% if not oct_special_microdata %}{{ oct_price_microdata }}{% else %}{{ oct_special_microdata }}{% endif %}",
        "priceCurrency": "{{ oct_price_currency }}",
        "itemCondition": "https://schema.org/NewCondition"

        {% if rating %}
    },

    "review": [
        {% for rew_one in oct_reviews_all %}
        {
            "@type": "Review",
            "author": {
			   "@type": "Person",
			   "name": "{{ rew_one.author }}"
			},
            "datePublished": "{{ rew_one.date_added }}",
            "description": "{{ rew_one.text }}",
            "reviewRating": {
                "@type": "Rating",
                "bestRating": "5",
                "ratingValue": "{{ rew_one.rating }}",
                "worstRating": "1"
            }
        }{% if oct_reviews_all|length > loop.index %},{% endif %}

    {% endfor %}
    ]
    {% else %}
    }
    {% endif %}
</script>


    <script>

        {% if logged %}

        const inputFile = document.querySelector('#upload-files');
        const inputContainer = document.querySelector('#upload-container');
        const filesListContainer = document.querySelector('#files-list-container');
        const fileList = [];

        const multipleEvents = (element, eventNames, listener) => {
            eventNames.split(' ').forEach(event => element.addEventListener(event, listener));
        };

        const previewImages = () => {
            filesListContainer.innerHTML = '';
            fileList.forEach((file, index) => {
                const imageContainer = document.createElement('div');
                imageContainer.classList.add('form__image-container');
                imageContainer.dataset.index = index;

                const img = document.createElement('img');
                img.classList.add('form__image');
                img.src = file.url;
                img.alt = file.name;

                imageContainer.appendChild(img);
                filesListContainer.appendChild(imageContainer);

                imageContainer.addEventListener('click', () => {
                    fileList.splice(index, 1);
                    previewImages();
                });
            });
        };

        const handleFileUpload = () => {
            inputFile.addEventListener('change', () => {
                Array.from(inputFile.files).forEach(file => {
                    if (file.type.match('image.*')) {
                        const fileURL = URL.createObjectURL(file);
                        fileList.push({ name: file.name, url: fileURL });
                    } else {
                        alert(`${file.name} is not an image.`);
                    }
                });
                previewImages();
            });
        };


        const addDragAndDropEvents = () => {
            multipleEvents(inputFile, 'click dragstart dragover', () => {
                inputContainer.classList.add('active');
            });

            multipleEvents(inputFile, 'dragleave dragend drop change blur', () => {
                inputContainer.classList.remove('active');
            });
        };

        addDragAndDropEvents();
        handleFileUpload();

        {% endif %}

    </script>

{% endif %}
<style>
    @media screen and (max-width:768px) {
        .cl-launcher{
            bottom: 120px!important;

        }
        .contact-popup {
            right: 20px;
            bottom: 120px!important;
        }
    }
</style>

<script>
    fbq('track', 'ViewContent', {
        content_name: '{{ heading_title }}',
        content_type: 'product',
        content_ids: ['{{ product_id }}']
    });
</script>

<script>
    $('.tab-trigger').click(function(){
        let target = $(this).attr('data-click');

        $('.product-reviews-ask-button[data-target="'+target+'"]').click();
    });
</script>

{% if show_compects == true %}
    <style>
        #comptest{
            display:block!important;
        }
        #oct-infobar{
            display: none;
        }
    </style>
{% endif %}
{{ footer }}


